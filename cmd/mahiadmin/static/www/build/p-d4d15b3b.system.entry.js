System.register(["./p-05ba43f8.system.js","./p-aec35cab.system.js","./p-f2ebe6a2.system.js","./p-08914b53.system.js","./p-2abf2625.system.js","./p-16d83290.system.js"],(function(i){"use strict";var t,e,a,s,l,r,p;return{setters:[function(i){t=i.r;e=i.h;a=i.H},function(i){s=i.d},function(){},function(i){l=i.A},function(i){r=i.F},function(i){p=i.t}],execute:function(){const n="application-details-view{}ta-error{--ta-error-bg-color:#fffbe6;--ta-error-color:rgba(0, 0, 0, 0.65);--ta-error-border:1px solid #ffe58f;--ta-error-margin-bottom:6px;--ta-error-padding:8px 15px}.files-wrapper{display:grid;grid-template-columns:auto auto auto auto;grid-gap:18px}.page-actions{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.icon{margin-left:10px}.wrapper{display:grid;grid-template-columns:auto minmax(auto, 280px)}@media (max-width: 1500px){.files-wrapper{grid-template-columns:auto auto auto}}@media (max-width: 1200px){.wrapper{grid-template-columns:auto 200px}.files-wrapper{grid-template-columns:auto auto auto}}@media (max-width: 768px){.wrapper{grid-template-columns:auto 150px}}@media (max-width: 768px){.wrapper{grid-template-columns:auto 0px}}@media (max-width: 600px){.files-wrapper{grid-template-columns:auto auto}}@media (max-width: 400px){.files-wrapper{grid-template-columns:auto}}";const o=i("application_details_view",class{constructor(i){t(this,i);this.initialFiles=[];this.isMobile=window.innerWidth<768;this.files=[];this.fetchingApi=false;this.searchQuery="";this.fetchApplication=()=>{this.fetchingApi=true;l().get(this.match.params.slug).then(this.handleApplicationSuccess).then(this.handleFileSuccess).catch(this.handleError).finally(()=>this.fetchingApi=false)};this.handleApplicationSuccess=i=>{this.application=i.data;return this.fetchFiles(this.application.id)};this.handleFileSuccess=i=>{this.files=i.data;this.initialFiles=i.data};this.fetchFiles=i=>r().listApplicationFiles(i);this.handleError=i=>{if(!i.error){return console.log(i)}p().danger(i.error)};this.handleFileUploaded=i=>{const{application:t,files:e}=this;const a=i.detail;this.initialFiles=[a,...e];if(!this.searchQuery&&this.searchQuery===""){this.files=[a,...e]}this.application=Object.assign({},t)};this.onSearch=s(i=>{this.searchQuery=i.detail;if(!i.detail||i.detail===""){this.files=this.initialFiles;return}r().search({applicationId:this.application.id,query:i.detail}).then(i=>{this.files=i.data}).catch(this.handleError)},300)}listenFileWasDeleted(i){const t=i.detail;this.files=this.files.filter(i=>i.id!==t.id)}componentWillLoad(){this.fetchApplication()}render(){if(this.fetchingApi)return e("ta-loader",null);const{application:i}=this;return e(a,null,e("div",{class:"wrapper"},e("div",{class:"left-side"},e("ta-dragger",{onTaFileUpload:this.handleFileUploaded,applicationId:this.application.id},e("ta-app-page",null,e("ta-page-header",{pageTitle:i.name}),e("div",{class:"file-search"},e("ta-input",{value:this.searchQuery,onTaInput:this.onSearch,label:`Search ${!this.isMobile?"(Hint: you can search an image by its content)":""}`,type:"search"})),e("div",{class:"files-wrapper"},this.files.map(i=>e("ta-file-card",{file:i})))))),e("application-details-sidebar",{application:this.application})))}});o.style=n}}}));