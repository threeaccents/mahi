import{r as t,h as n,H as i}from"./p-cd2828d1.js";import"./p-4c11f27f.js";import{A as e}from"./p-c60f5320.js";import{t as r}from"./p-df5b8a0d.js";function a(t,n){return"string"==typeof t?(n||document).querySelector(t):t||null}function o(t){var n=t.getBoundingClientRect();return{top:n.top+(document.documentElement.scrollTop||document.body.scrollTop),left:n.left+(document.documentElement.scrollLeft||document.body.scrollLeft)}}function s(t){var n=t.getBoundingClientRect();return n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)}function u(t){return t.titleHeight+t.margins.top+t.paddings.top}function c(t){return t.margins.left+t.paddings.left}function h(t){return t.margins.top+t.margins.bottom+t.paddings.top+t.paddings.bottom+t.titleHeight+t.legendHeight}function l(t){return t.margins.left+t.margins.right+t.paddings.left+t.paddings.right}function f(t){return parseFloat(t.toFixed(2))}function v(t,n,i){var e=arguments.length>3&&void 0!==arguments[3]&&arguments[3];i||(i=e?t[0]:t[t.length-1]);var r=new Array(Math.abs(n)).fill(i);return e?r.concat(t):t.concat(r)}function d(t,n){return(t+"").length*n}function p(t,n){return{x:Math.sin(t*dt)*n,y:Math.cos(t*dt)*n}}function y(t,n){var i=void 0,e=void 0;return t<=n?(i=n-t,e=t):(i=t-n,e=n),[i,e]}function m(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.length-t.length;return i>0?t=v(t,i):n=v(n,i),[t,n]}function g(t,n){if(t)return t.length>n?t.slice(0,n-3)+"...":t}function b(t){var n=void 0;if("number"==typeof t)n=t;else if("string"==typeof t&&(n=Number(t),Number.isNaN(n)))return t;var i=Math.floor(Math.log10(Math.abs(n)));if(i<=2)return n;var e=Math.floor(i/3),r=Math.pow(10,i-3*e)*+(n/Math.pow(10,i)).toFixed(1);return Math.round(100*r)/100+" "+["","K","M","B","T"][e]}function x(t,n){for(var i=[],e=0;e<t.length;e++)i.push([t[e],n[e]]);var r=function(t,n,i,e){var r=function(t,n){var i=n[0]-t[0],e=n[1]-t[1];return{length:Math.sqrt(Math.pow(i,2)+Math.pow(e,2)),angle:Math.atan2(e,i)}}(n||t,i||t),a=r.angle+(e?Math.PI:0),o=.2*r.length;return[t[0]+Math.cos(a)*o,t[1]+Math.sin(a)*o]};return function(t){return t.reduce((function(t,n,i,e){return 0===i?n[0]+","+n[1]:t+" "+function(t,n,i){var e=r(i[n-1],i[n-2],t),a=r(t,i[n-1],i[n+1],!0);return"C "+e[0]+","+e[1]+" "+a[0]+","+a[1]+" "+t[0]+","+t[1]}(n,i,e)}),"")}(i)}function w(t){return t>255?255:t<0?0:t}function k(t,n){var i=gt(t),e=!1;"#"==i[0]&&(i=i.slice(1),e=!0);var r=parseInt(i,16),a=w((r>>16)+n),o=w((r>>8&255)+n);return(e?"#":"")+(w((255&r)+n)|o<<8|a<<16).toString(16)}function M(t,n){return"string"==typeof t?(n||document).querySelector(t):t||null}function O(t,n){var i=document.createElementNS("http://www.w3.org/2000/svg",t);for(var e in n){var r=n[e];if("inside"===e)M(r).appendChild(i);else if("around"===e){var a=M(r);a.parentNode.insertBefore(i,a),i.appendChild(a)}else"styles"===e?"object"===(void 0===r?"undefined":xt(r))&&Object.keys(r).map((function(t){i.style[t]=r[t]})):("className"===e&&(e="class"),"innerHTML"===e?i.textContent=r:i.setAttribute(e,r))}return i}function j(t,n){return O("linearGradient",{inside:t,id:n,x1:0,x2:0,y1:0,y2:1})}function T(t,n,i,e){return O("stop",{inside:t,style:"stop-color: "+i,offset:n,"stop-opacity":e})}function A(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,e={className:t,transform:n};return i&&(e.inside=i),O("g",e)}function S(t){return O("path",{className:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",d:t,styles:{stroke:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none",fill:arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none","stroke-width":arguments.length>4&&void 0!==arguments[4]?arguments[4]:2}})}function E(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],e="path-fill-gradient-"+n+"-"+(i?"lighter":"default"),r=j(t,e),a=[1,.6,.2];return i&&(a=[.4,.2,0]),T(r,"0%",n,a[0]),T(r,"50%",n,a[1]),T(r,"100%",n,a[2]),e}function L(t,n,i,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"none",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o={className:t,x:n,y:i,width:e,height:e,fill:r};return Object.keys(a).map((function(t){o[t]=a[t]})),O("rect",o)}function D(t,n,i,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=r.fontSize||kt;return O("text",{className:t,x:n,y:i,dy:(void 0!==r.dy?r.dy:a/2)+"px","font-size":a+"px",fill:r.fill||Ot,"text-anchor":r.textAnchor||"start",innerHTML:e})}function N(t,n,i,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};r.stroke||(r.stroke=Mt);var a=O("line",{className:"line-vertical "+r.className,x1:0,x2:0,y1:i,y2:e,styles:{stroke:r.stroke}}),o=O("text",{x:0,y:i>e?i+wt:i-wt-kt,dy:kt+"px","font-size":kt+"px","text-anchor":"middle",innerHTML:n+""}),s=O("g",{transform:"translate("+t+", 0)"});return s.appendChild(a),s.appendChild(o),s}function z(t,n,i,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};r.stroke||(r.stroke=Mt),r.lineType||(r.lineType=""),r.shortenNumbers&&(n=b(n));var a=O("line",{className:"line-horizontal "+r.className+("dashed"===r.lineType?"dashed":""),x1:i,x2:e,y1:0,y2:0,styles:{stroke:r.stroke}}),o=O("text",{x:i<e?i-wt:i+wt,y:0,dy:kt/2-2+"px","font-size":kt+"px","text-anchor":i<e?"end":"start",innerHTML:n+""}),s=O("g",{transform:"translate(0, "+t+")","stroke-opacity":1});return 0!==o&&"0"!==o||(s.style.stroke="rgba(27, 31, 35, 0.6)"),s.appendChild(a),s.appendChild(o),s}function C(t,n,i,e){var r="string"==typeof n?n:n.join(", ");return[t,{transform:i.join(", ")},e,Dt,"translate",{transform:r}]}function P(t,n,i){return C(t,[0,i],[0,n],Et)}function H(t,n){return[t,{d:n},St,Dt]}function F(t,n,i){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"linear",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=t.cloneNode(!0),s=t.cloneNode(!0);for(var u in n){var c=void 0;c="transform"===u?document.createElementNS("http://www.w3.org/2000/svg","animateTransform"):document.createElementNS("http://www.w3.org/2000/svg","animate");var h=a[u]||t.getAttribute(u),l=n[u],f={attributeName:u,from:h,to:l,begin:"0s",dur:i/1e3+"s",values:h+";"+l,keySplines:zt[e],keyTimes:"0;1",calcMode:"spline",fill:"freeze"};for(var v in r&&(f.type=r),f)c.setAttribute(v,f[v]);o.appendChild(c),s.setAttribute(u,r?"translate("+l+")":l)}return[o,s]}function I(t,n){t.style.transform=n,t.style.webkitTransform=n,t.style.msTransform=n,t.style.mozTransform=n,t.style.oTransform=n}function R(t,n){var i=[],e=[];n.map((function(t){var n,r=t[0],a=r.parentNode;t[0]=r;var o=F.apply(void 0,function(t){if(Array.isArray(t)){for(var n=0,i=Array(t.length);n<t.length;n++)i[n]=t[n];return i}return Array.from(t)}(t)),s=Nt(o,2);n=s[0],i.push(s[1]),e.push([n,a]),a.replaceChild(n,r)}));var r=t.cloneNode(!0);return e.map((function(t,e){t[1].replaceChild(i[e],t[0]),n[e][0]=i[e]})),r}function W(t,n,i){if(0!==i.length){var e=R(n,i);n.parentNode==t&&(t.removeChild(n),t.appendChild(e)),setTimeout((function(){e.parentNode==t&&(t.removeChild(e),t.appendChild(n))}),Lt)}}function B(t){var n=new Date(t);return n.setMinutes(n.getMinutes()-n.getTimezoneOffset()),n}function U(t){var n=t.getDate(),i=t.getMonth()+1;return[t.getFullYear(),(i>9?"":"0")+i,(n>9?"":"0")+n].join("-")}function _(t){return new Date(t.getTime())}function G(t,n){var i=q(t);return Math.ceil(function(t,n){var i=Wt*Rt;return(B(n)-B(t))/i}(i,n)/It)}function Y(t,n){return t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}function J(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=Bt[t];return n?i.slice(0,3):i}function V(t,n){return new Date(n,t+1,0)}function q(t){var n=_(t),i=n.getDay();return 0!==i&&K(n,-1*i),n}function K(t,n){t.setDate(t.getDate()+n)}function X(t,n,i){var e=Object.keys(Jt).filter((function(n){return t.includes(n)})),r=Jt[e[0]];return Object.assign(r,{constants:n,getData:i}),new Yt(r)}function $(t){if(Array.isArray(t)){for(var n=0,i=Array(t.length);n<t.length;n++)i[n]=t[n];return i}return Array.from(t)}function Q(t){if(0===t)return[0,0];if(isNaN(t))return{mantissa:-6755399441055744,exponent:972};var n=t>0?1:-1;if(!isFinite(t))return{mantissa:4503599627370496*n,exponent:972};t=Math.abs(t);var i=Math.floor(Math.log10(t));return[n*(t/Math.pow(10,i)),i]}function Z(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=Math.ceil(t),e=Math.floor(n),r=i-e,a=r,o=1;r>5&&(r%2!=0&&(r=++i-e),a=r/2,o=2),r<=2&&(o=r/(a=4)),0===r&&(a=5,o=1);for(var s=[],u=0;u<=a;u++)s.push(e+o*u);return s}function tt(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=Q(t),e=Qt(i,2),r=e[0],a=e[1],o=n?n/Math.pow(10,a):0,s=Z(r=r.toFixed(6),o);return s.map((function(t){return t*Math.pow(10,a)}))}function nt(t){function n(t,n){for(var i=tt(t),e=i[1]-i[0],r=0,a=1;r<n;a++)i.unshift(-1*(r+=e));return i}var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=Math.max.apply(Math,$(t)),r=Math.min.apply(Math,$(t)),a=[];if(e>=0&&r>=0)Q(e),a=i?tt(e,r):tt(e);else if(e>0&&r<0){var o=Math.abs(r);e>=o?(Q(e),a=n(e,o)):(Q(o),a=n(o,e).map((function(t){return-1*t})))}else if(e<=0&&r<=0){var s=Math.abs(r),u=Math.abs(e);Q(s),a=(a=i?tt(s,u):tt(s)).reverse().map((function(t){return-1*t}))}return a}function it(t){var n=et(t);return t.indexOf(0)>=0?t.indexOf(0):t[0]>0?-1*t[0]/n:-1*t[t.length-1]/n+(t.length-1)}function et(t){return t[1]-t[0]}function rt(t){return t[t.length-1]-t[0]}function at(t,n){return f(n.zeroLine-t*n.scaleMultiplier)}function ot(t,n){return n.filter((function(n){return n<t})).length}function st(t,n){t.labels=t.labels||[];var i=t.labels.length,e=t.datasets,r=new Array(i).fill(0);return e||(e=[{values:r}]),e.map((function(t){if(t.values){var e=t.values;e=(e=e.map((function(t){return isNaN(t)?0:t}))).length>i?e.slice(0,i):v(e,i-e.length,0)}else t.values=r;t.chartType||(t.chartType=n)})),t.yRegions&&t.yRegions.map((function(t){if(t.end<t.start){var n=[t.end,t.start];t.start=n[0],t.end=n[1]}})),t}function ut(t){var n=new Array(t.labels.length).fill(0),i={labels:t.labels.slice(0,-1),datasets:t.datasets.map((function(t){return{name:"",values:n.slice(0,-1),chartType:t.chartType}}))};return t.yMarkers&&(i.yMarkers=[{value:0,label:""}]),t.yRegions&&(i.yRegions=[{start:0,end:0,label:""}]),i}function ct(t){if(Array.isArray(t)){for(var n=0,i=Array(t.length);n<t.length;n++)i[n]=t[n];return i}return Array.from(t)}!function(t,n){void 0===n&&(n={});var i=n.insertAt;if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===i&&e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}('.chart-container{position:relative;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif}.chart-container .axis,.chart-container .chart-label{fill:#555b51}.chart-container .axis line,.chart-container .chart-label line{stroke:#dadada}.chart-container .dataset-units circle{stroke:#fff;stroke-width:2}.chart-container .dataset-units path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container .dataset-path{stroke-width:2px}.chart-container .path-group path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container line.dashed{stroke-dasharray:5,3}.chart-container .axis-line .specific-value{text-anchor:start}.chart-container .axis-line .y-line{text-anchor:end}.chart-container .axis-line .x-line{text-anchor:middle}.chart-container .legend-dataset-text{fill:#6c7680;font-weight:600}.graph-svg-tip{position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.8);border-radius:3px}.graph-svg-tip ol,.graph-svg-tip ul{padding-left:0;display:-webkit-box;display:-ms-flexbox;display:flex}.graph-svg-tip ul.data-point-list li{min-width:90px;-webkit-box-flex:1;-ms-flex:1;flex:1;font-weight:600}.graph-svg-tip strong{color:#dfe2e5;font-weight:600}.graph-svg-tip .svg-pointer{position:absolute;height:5px;margin:0 0 0 -5px;content:" ";border:5px solid transparent;border-top-color:rgba(0,0,0,.8)}.graph-svg-tip.comparison{padding:0;text-align:left;pointer-events:none}.graph-svg-tip.comparison .title{display:block;padding:10px;margin:0;font-weight:600;line-height:1;pointer-events:none}.graph-svg-tip.comparison ul{margin:0;white-space:nowrap;list-style:none}.graph-svg-tip.comparison li{display:inline-block;padding:5px 10px}');var ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};a.create=function(t,n){var i=document.createElement(t);for(var e in n){var r=n[e];if("inside"===e)a(r).appendChild(i);else if("around"===e){var o=a(r);o.parentNode.insertBefore(i,o),i.appendChild(o)}else"styles"===e?"object"===(void 0===r?"undefined":ht(r))&&Object.keys(r).map((function(t){i.style[t]=r[t]})):e in i?i[e]=r:i.setAttribute(e,r)}return i};var lt={margins:{top:10,bottom:10,left:20,right:20},paddings:{top:20,bottom:40,left:30,right:10},baseHeight:240,titleHeight:20,legendHeight:30,titleFontSize:12},ft=["light-blue","blue","violet","red","orange","yellow","green","light-green","purple","magenta","light-grey","dark-grey"],vt={bar:ft,line:ft,pie:ft,percentage:ft,heatmap:["#ebedf0","#c6e48b","#7bc96f","#239a3b","#196127"],donut:ft},dt=Math.PI/180,pt=function(){function t(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,i,e){return i&&t(n.prototype,i),e&&t(n,e),n}}(),yt=function(){function t(n){var i=n.parent,e=void 0===i?null:i,r=n.colors,a=void 0===r?[]:r;(function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")})(this,t),this.parent=e,this.colors=a,this.titleName="",this.titleValue="",this.listValues=[],this.titleValueFirst=0,this.x=0,this.y=0,this.top=0,this.left=0,this.setup()}return pt(t,[{key:"setup",value:function(){this.makeTooltip()}},{key:"refresh",value:function(){this.fill(),this.calcPosition()}},{key:"makeTooltip",value:function(){var t=this;this.container=a.create("div",{inside:this.parent,className:"graph-svg-tip comparison",innerHTML:'<span class="title"></span>\n\t\t\t\t<ul class="data-point-list"></ul>\n\t\t\t\t<div class="svg-pointer"></div>'}),this.hideTip(),this.title=this.container.querySelector(".title"),this.dataPointList=this.container.querySelector(".data-point-list"),this.parent.addEventListener("mouseleave",(function(){t.hideTip()}))}},{key:"fill",value:function(){var t=this;this.index&&this.container.setAttribute("data-point-index",this.index),this.title.innerHTML=this.titleValueFirst?"<strong>"+this.titleValue+"</strong>"+this.titleName:this.titleName+"<strong>"+this.titleValue+"</strong>",this.dataPointList.innerHTML="",this.listValues.map((function(n,i){var e=0===n.formatted||n.formatted?n.formatted:n.value,r=a.create("li",{styles:{"border-top":"3px solid "+(t.colors[i]||"black")},innerHTML:'<strong style="display: block;">'+(0===e||e?e:"")+"</strong>\n\t\t\t\t\t"+(n.title?n.title:"")});t.dataPointList.appendChild(r)}))}},{key:"calcPosition",value:function(){var t=this.container.offsetWidth;this.top=this.y-this.container.offsetHeight-5,this.left=this.x-t/2;var n=this.parent.offsetWidth-t,i=this.container.querySelector(".svg-pointer");this.left<0?(i.style.left="calc(50% - "+-1*this.left+"px)",this.left=0):this.left>n?(i.style.left="calc(50% + "+(this.left-n)+"px)",this.left=n):i.style.left="50%"}},{key:"setValues",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;this.titleName=i.name,this.titleValue=i.value,this.listValues=e,this.x=t,this.y=n,this.titleValueFirst=i.valueFirst||0,this.index=r,this.refresh()}},{key:"hideTip",value:function(){this.container.style.top="0px",this.container.style.left="0px",this.container.style.opacity="0"}},{key:"showTip",value:function(){this.container.style.top=this.top+"px",this.container.style.left=this.left+"px",this.container.style.opacity="1"}}]),t}(),mt={"light-blue":"#7cd6fd",blue:"#5e64ff",violet:"#743ee2",red:"#ff5858",orange:"#ffa00a",yellow:"#feef72",green:"#28a745","light-green":"#98d85b",purple:"#b554ff",magenta:"#ffa3ef",black:"#36114C",grey:"#bdd3e6","light-grey":"#f0f4f7","dark-grey":"#b8c2cc"},gt=function(t){return mt[t]||t},bt=function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,n){var i=[],e=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(e=(o=s.next()).done)&&(i.push(o.value),!n||i.length!==n);e=!0);}catch(t){r=!0,a=t}finally{try{!e&&s.return&&s.return()}finally{if(r)throw a}}return i}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")},xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wt=4,kt=10,Mt="#dadada",Ot="#555b51",jt={bar:function(t){var n=void 0;"rect"!==t.nodeName&&(n=t.getAttribute("transform"),t=t.childNodes[0]);var i=t.cloneNode();return i.style.fill="#000000",i.style.opacity="0.4",n&&i.setAttribute("transform",n),i},dot:function(t){var n=void 0;"circle"!==t.nodeName&&(n=t.getAttribute("transform"),t=t.childNodes[0]);var i=t.cloneNode(),e=t.getAttribute("r"),r=t.getAttribute("fill");return i.setAttribute("r",parseInt(e)+4),i.setAttribute("fill",r),i.style.opacity="0.6",n&&i.setAttribute("transform",n),i},heat_square:function(t){var n=void 0;"circle"!==t.nodeName&&(n=t.getAttribute("transform"),t=t.childNodes[0]);var i=t.cloneNode(),e=t.getAttribute("r"),r=t.getAttribute("fill");return i.setAttribute("r",parseInt(e)+4),i.setAttribute("fill",r),i.style.opacity="0.6",n&&i.setAttribute("transform",n),i}},Tt={bar:function(t,n){var i=void 0;"rect"!==t.nodeName&&(i=t.getAttribute("transform"),t=t.childNodes[0]);var e=["x","y","width","height"];Object.values(t.attributes).filter((function(t){return e.includes(t.name)&&t.specified})).map((function(t){n.setAttribute(t.name,t.nodeValue)})),i&&n.setAttribute("transform",i)},dot:function(t,n){var i=void 0;"circle"!==t.nodeName&&(i=t.getAttribute("transform"),t=t.childNodes[0]);var e=["cx","cy"];Object.values(t.attributes).filter((function(t){return e.includes(t.name)&&t.specified})).map((function(t){n.setAttribute(t.name,t.nodeValue)})),i&&n.setAttribute("transform",i)},heat_square:function(t,n){var i=void 0;"circle"!==t.nodeName&&(i=t.getAttribute("transform"),t=t.childNodes[0]);var e=["cx","cy"];Object.values(t.attributes).filter((function(t){return e.includes(t.name)&&t.specified})).map((function(t){n.setAttribute(t.name,t.nodeValue)})),i&&n.setAttribute("transform",i)}},At=function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,n){var i=[],e=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(e=(o=s.next()).done)&&(i.push(o.value),!n||i.length!==n);e=!0);}catch(t){r=!0,a=t}finally{try{!e&&s.return&&s.return()}finally{if(r)throw a}}return i}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")},St=350,Et=St,Lt=250,Dt="easein",Nt=function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,n){var i=[],e=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(e=(o=s.next()).done)&&(i.push(o.value),!n||i.length!==n);e=!0);}catch(t){r=!0,a=t}finally{try{!e&&s.return&&s.return()}finally{if(r)throw a}}return i}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")},zt={ease:"0.25 0.1 0.25 1",linear:"0 0 1 1",easein:"0.1 0.8 0.2 1",easeout:"0 0 0.58 1",easeinout:"0.42 0 0.58 1"},Ct=function(){function t(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,i,e){return i&&t(n.prototype,i),e&&t(n,e),n}}(),Pt=function(){function t(n,i){if(function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.parent="string"==typeof n?document.querySelector(n):n,!(this.parent instanceof HTMLElement))throw new Error("No `parent` element to render on was provided.");this.rawChartArgs=i,this.title=i.title||"",this.type=i.type||"",this.realData=this.prepareData(i.data),this.data=this.prepareFirstData(this.realData),this.colors=this.validateColors(i.colors,this.type),this.config={showTooltip:1,showLegend:1,isNavigable:i.isNavigable||0,animate:void 0!==i.animate?i.animate:1,truncateLegends:i.truncateLegends||0},this.measures=JSON.parse(JSON.stringify(lt));var e=this.measures;this.setMeasures(i),this.title.length||(e.titleHeight=0),this.config.showLegend||(e.legendHeight=0),this.argHeight=i.height||e.baseHeight,this.state={},this.options={},this.initTimeout=700,this.config.isNavigable&&(this.overlays=[]),this.configure(i)}return Ct(t,[{key:"prepareData",value:function(t){return t}},{key:"prepareFirstData",value:function(t){return t}},{key:"validateColors",value:function(t,n){var i=[];return(t=(t||[]).concat(vt[n])).forEach((function(t){var n=gt(t);!function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}(n)?console.warn('"'+t+'" is not a valid color.'):i.push(n)})),i}},{key:"setMeasures",value:function(){}},{key:"configure",value:function(){var t=this,n=this.argHeight;this.baseHeight=n,this.height=n-h(this.measures),this.boundDrawFn=function(){return t.draw(!0)},window.addEventListener("resize",this.boundDrawFn),window.addEventListener("orientationchange",this.boundDrawFn)}},{key:"destroy",value:function(){window.removeEventListener("resize",this.boundDrawFn),window.removeEventListener("orientationchange",this.boundDrawFn)}},{key:"setup",value:function(){this.makeContainer(),this.updateWidth(),this.makeTooltip(),this.draw(!1,!0)}},{key:"makeContainer",value:function(){this.parent.innerHTML="";var t={inside:this.parent,className:"chart-container"};this.independentWidth&&(t.styles={width:this.independentWidth+"px"}),this.container=a.create("div",t)}},{key:"makeTooltip",value:function(){this.tip=new yt({parent:this.container,colors:this.colors}),this.bindTooltip()}},{key:"bindTooltip",value:function(){}},{key:"draw",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.updateWidth(),this.calc(n),this.makeChartArea(),this.setupComponents(),this.components.forEach((function(n){return n.setup(t.drawArea)})),this.render(this.components,!1),i&&(this.data=this.realData,setTimeout((function(){t.update(t.data)}),this.initTimeout)),this.renderLegend(),this.setupNavigation(i)}},{key:"calc",value:function(){}},{key:"updateWidth",value:function(){this.baseWidth=function(t){var n=window.getComputedStyle(t),i=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight);return t.clientWidth-i}(this.parent),this.width=this.baseWidth-l(this.measures)}},{key:"makeChartArea",value:function(){this.svg&&this.container.removeChild(this.svg);var t=this.measures;this.svg=function(t,n,i,e){return O("svg",{className:"frappe-chart chart",inside:t,width:i,height:e})}(this.container,0,this.baseWidth,this.baseHeight),this.svgDefs=function(t){return O("defs",{inside:t})}(this.svg),this.title.length&&(this.titleEL=D("title",t.margins.left,t.margins.top,this.title,{fontSize:t.titleFontSize,fill:"#666666",dy:t.titleFontSize}));var n=u(t);this.drawArea=A(this.type+"-chart chart-draw-area","translate("+c(t)+", "+n+")"),this.config.showLegend&&(n+=this.height+t.paddings.bottom,this.legendArea=A("chart-legend","translate("+c(t)+", "+n+")")),this.title.length&&this.svg.appendChild(this.titleEL),this.svg.appendChild(this.drawArea),this.config.showLegend&&this.svg.appendChild(this.legendArea),this.updateTipOffset(c(t),u(t))}},{key:"updateTipOffset",value:function(t,n){this.tip.offset={x:t,y:n}}},{key:"setupComponents",value:function(){this.components=new Map}},{key:"update",value:function(t){t||console.error("No data to update."),this.data=this.prepareData(t),this.calc(),this.render(this.components,this.config.animate)}},{key:"render",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.components,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.config.isNavigable&&this.overlays.map((function(t){return t.parentNode.removeChild(t)}));var e=[];n.forEach((function(t){e=e.concat(t.update(i))})),e.length>0?(W(this.container,this.svg,e),setTimeout((function(){n.forEach((function(t){return t.make()})),t.updateNav()}),400)):(n.forEach((function(t){return t.make()})),this.updateNav())}},{key:"updateNav",value:function(){this.config.isNavigable&&(this.makeOverlay(),this.bindUnits())}},{key:"renderLegend",value:function(){}},{key:"setupNavigation",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.config.isNavigable&&n&&(this.bindOverlay(),this.keyActions={13:this.onEnterKey.bind(this),37:this.onLeftArrow.bind(this),38:this.onUpArrow.bind(this),39:this.onRightArrow.bind(this),40:this.onDownArrow.bind(this)},document.addEventListener("keydown",(function(n){s(t.container)&&(n=n||window.event,t.keyActions[n.keyCode]&&t.keyActions[n.keyCode]())})))}},{key:"makeOverlay",value:function(){}},{key:"updateOverlay",value:function(){}},{key:"bindOverlay",value:function(){}},{key:"bindUnits",value:function(){}},{key:"onLeftArrow",value:function(){}},{key:"onRightArrow",value:function(){}},{key:"onUpArrow",value:function(){}},{key:"onDownArrow",value:function(){}},{key:"onEnterKey",value:function(){}},{key:"addDataPoint",value:function(){}},{key:"removeDataPoint",value:function(){}},{key:"getDataPoint",value:function(){}},{key:"setCurrentDataPoint",value:function(){}},{key:"updateDataset",value:function(){}},{key:"export",value:function(){var t=function(t){var n=t.cloneNode(!0);n.classList.add("chart-container"),n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");var i=a.create("style",{innerHTML:".chart-container{position:relative;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif}.chart-container .axis,.chart-container .chart-label{fill:#555b51}.chart-container .axis line,.chart-container .chart-label line{stroke:#dadada}.chart-container .dataset-units circle{stroke:#fff;stroke-width:2}.chart-container .dataset-units path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container .dataset-path{stroke-width:2px}.chart-container .path-group path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container line.dashed{stroke-dasharray:5,3}.chart-container .axis-line .specific-value{text-anchor:start}.chart-container .axis-line .y-line{text-anchor:end}.chart-container .axis-line .x-line{text-anchor:middle}.chart-container .legend-dataset-text{fill:#6c7680;font-weight:600}.graph-svg-tip{position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.8);border-radius:3px}.graph-svg-tip ul{padding-left:0;display:flex}.graph-svg-tip ol{padding-left:0;display:flex}.graph-svg-tip ul.data-point-list li{min-width:90px;flex:1;font-weight:600}.graph-svg-tip strong{color:#dfe2e5;font-weight:600}.graph-svg-tip .svg-pointer{position:absolute;height:5px;margin:0 0 0 -5px;content:' ';border:5px solid transparent;border-top-color:rgba(0,0,0,.8)}.graph-svg-tip.comparison{padding:0;text-align:left;pointer-events:none}.graph-svg-tip.comparison .title{display:block;padding:10px;margin:0;font-weight:600;line-height:1;pointer-events:none}.graph-svg-tip.comparison ul{margin:0;white-space:nowrap;list-style:none}.graph-svg-tip.comparison li{display:inline-block;padding:5px 10px}"});n.insertBefore(i,n.firstChild);var e=a.create("div");return e.appendChild(n),e.innerHTML}(this.svg);!function(t,n){var i=document.createElement("a");i.style="display: none";var e=new Blob(n,{type:"image/svg+xml; charset=utf-8"}),r=window.URL.createObjectURL(e);i.href=r,i.download=t,document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i),window.URL.revokeObjectURL(r)}),300)}(this.title||"Chart",[t])}}]),t}(),Ht=function(){function t(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,i,e){return i&&t(n.prototype,i),e&&t(n,e),n}}(),Ft=function(){function t(n,i){return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,i))}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(t,Pt),Ht(t,[{key:"configure",value:function(n){(function t(n,i,e){null===n&&(n=Function.prototype);var r=Object.getOwnPropertyDescriptor(n,i);if(void 0===r){var a=Object.getPrototypeOf(n);return null===a?void 0:t(a,i,e)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(e):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"configure",this).call(this,n),this.config.maxSlices=n.maxSlices||20,this.config.maxLegendPoints=n.maxLegendPoints||20}},{key:"calc",value:function(){var t=this,n=this.state,i=this.config.maxSlices;n.sliceTotals=[];var e=this.data.labels.map((function(n,i){var e=0;return t.data.datasets.map((function(t){e+=t.values[i]})),[e,n]})).filter((function(t){return t[0]>=0})),r=e;if(e.length>i){e.sort((function(t,n){return n[0]-t[0]})),r=e.slice(0,i-1);var a=0;e.slice(i-1).map((function(t){a+=t[0]})),r.push([a,"Rest"]),this.colors[i-1]="grey"}n.labels=[],r.map((function(t){n.sliceTotals.push(t[0]),n.labels.push(t[1])})),n.grandTotal=n.sliceTotals.reduce((function(t,n){return t+n}),0),this.center={x:this.width/2,y:this.height/2}}},{key:"renderLegend",value:function(){var t=this,n=this.state;this.legendArea.textContent="",this.legendTotals=n.sliceTotals.slice(0,this.config.maxLegendPoints);var i=0,e=0;this.legendTotals.map((function(r,a){var o=110,s=Math.floor((t.width-l(t.measures))/o);t.legendTotals.length<s&&(o=t.width/t.legendTotals.length),i>s&&(i=0,e+=20);var u=function(t,n,i){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",r=arguments[4];r=arguments.length>5&&void 0!==arguments[5]&&arguments[5]?g(r,15):r;var a={className:"legend-dot",cx:0,cy:0,r:i,fill:e},o=O("text",{className:"legend-dataset-text",x:0,y:0,dx:kt+"px",dy:kt/3+"px","font-size":1.2*kt+"px","text-anchor":"start",fill:Ot,innerHTML:r}),s=O("g",{transform:"translate("+t+", "+n+")"});return s.appendChild(O("circle",a)),s.appendChild(o),s}(o*i+5,e,5,t.colors[a],n.labels[a]+": "+r,t.config.truncateLegends);t.legendArea.appendChild(u),i++}))}}]),t}(),It=7,Rt=1e3,Wt=86400,Bt=["January","February","March","April","May","June","July","August","September","October","November","December"],Ut=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],_t=function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,n){var i=[],e=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(e=(o=s.next()).done)&&(i.push(o.value),!n||i.length!==n);e=!0);}catch(t){r=!0,a=t}finally{try{!e&&s.return&&s.return()}finally{if(r)throw a}}return i}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Gt=function(){function t(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,i,e){return i&&t(n.prototype,i),e&&t(n,e),n}}(),Yt=function(){function t(n){var i=n.layerClass,e=void 0===i?"":i,r=n.layerTransform,a=void 0===r?"":r,o=n.constants,s=n.getData,u=n.makeElements,c=n.animateElements;(function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")})(this,t),this.layerTransform=a,this.constants=o,this.makeElements=u,this.getData=s,this.animateElements=c,this.store=[],this.labels=[],this.layerClass=e,this.layerClass="function"==typeof this.layerClass?this.layerClass():this.layerClass,this.refresh()}return Gt(t,[{key:"refresh",value:function(t){this.data=t||this.getData()}},{key:"setup",value:function(t){this.layer=A(this.layerClass,this.layerTransform,t)}},{key:"make",value:function(){this.render(this.data),this.oldData=this.data}},{key:"render",value:function(t){var n=this;this.store=this.makeElements(t),this.layer.textContent="",this.store.forEach((function(t){n.layer.appendChild(t)})),this.labels.forEach((function(t){n.layer.appendChild(t)}))}},{key:"update",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.refresh();var n=[];return t&&(n=this.animateElements(this.data)||[]),n}}]),t}(),Jt={donutSlices:{layerClass:"donut-slices",makeElements:function(t){return t.sliceStrings.map((function(n,i){var e=S(n,"donut-path",t.colors[i],"none",t.strokeWidth);return e.style.transition="transform .3s;",e}))},animateElements:function(t){return this.store.map((function(n,i){return H(n,t.sliceStrings[i])}))}},pieSlices:{layerClass:"pie-slices",makeElements:function(t){return t.sliceStrings.map((function(n,i){var e=S(n,"pie-path","none",t.colors[i]);return e.style.transition="transform .3s;",e}))},animateElements:function(t){return this.store.map((function(n,i){return H(n,t.sliceStrings[i])}))}},percentageBars:{layerClass:"percentage-bars",makeElements:function(t){var n=this;return t.xPositions.map((function(i,e){return function(t,n,i,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"none";return O("rect",{className:"percentage-bar",x:t,y:n,width:i,height:e,fill:a,styles:{stroke:k(a,-25),"stroke-dasharray":"0, "+(e+i)+", "+i+", "+e,"stroke-width":r}})}(i,0,t.widths[e],n.constants.barHeight,n.constants.barDepth,t.colors[e])}))},animateElements:function(t){if(t)return[]}},yAxis:{layerClass:"y axis",makeElements:function(t){var n=this;return t.positions.map((function(i,e){return function(t,n,i){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.pos||(e.pos="left"),e.offset||(e.offset=0),e.mode||(e.mode="span"),e.stroke||(e.stroke=Mt),e.className||(e.className="");var r=-6,a="span"===e.mode?i+6:0;return"tick"===e.mode&&"right"===e.pos&&(r=i+6,a=i),z(t,n,r+=e.offset,a+=e.offset,{stroke:e.stroke,className:e.className,lineType:e.lineType,shortenNumbers:e.shortenNumbers})}(i,t.labels[e],n.constants.width,{mode:n.constants.mode,pos:n.constants.pos,shortenNumbers:n.constants.shortenNumbers})}))},animateElements:function(t){var n=t.positions,i=t.labels,e=this.oldData.positions,r=this.oldData.labels,a=m(e,n),o=_t(a,2);e=o[0],n=o[1];var s=m(r,i),u=_t(s,2);return r=u[0],this.render({positions:e,labels:i=u[1]}),this.store.map((function(t,i){return P(t,n[i],e[i])}))}},xAxis:{layerClass:"x axis",makeElements:function(t){var n=this;return t.positions.map((function(i,e){return function(t,n,i){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.pos||(e.pos="bottom"),e.offset||(e.offset=0),e.mode||(e.mode="span"),e.stroke||(e.stroke=Mt),e.className||(e.className="");var r=i+6,a="span"===e.mode?-6:i;return"tick"===e.mode&&"top"===e.pos&&(r=-6,a=0),N(t,n,r,a,{stroke:e.stroke,className:e.className,lineType:e.lineType})}(i,t.calcLabels[e],n.constants.height,{mode:n.constants.mode,pos:n.constants.pos})}))},animateElements:function(t){var n=t.positions,i=t.calcLabels,e=this.oldData.positions,r=this.oldData.calcLabels,a=m(e,n),o=_t(a,2);e=o[0],n=o[1];var s=m(r,i),u=_t(s,2);return r=u[0],this.render({positions:e,calcLabels:i=u[1]}),this.store.map((function(t,i){return function(t,n,i){return C(t,[i,0],[n,0],Et)}(t,n[i],e[i])}))}},yMarkers:{layerClass:"y-markers",makeElements:function(t){var n=this;return t.map((function(t){return function(t,n,i){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.labelPos||(e.labelPos="right");var r=O("text",{className:"chart-label",x:"left"===e.labelPos?wt:i-d(n,5)-wt,y:0,dy:kt/-2+"px","font-size":kt+"px","text-anchor":"start",innerHTML:n+""}),a=z(t,"",0,i,{stroke:e.stroke||Mt,className:e.className||"",lineType:e.lineType});return a.appendChild(r),a}(t.position,t.label,n.constants.width,{labelPos:t.options.labelPos,mode:"span",lineType:"dashed"})}))},animateElements:function(t){var n=m(this.oldData,t),i=_t(n,2);this.oldData=i[0];var e=(t=i[1]).map((function(t){return t.position})),r=t.map((function(t){return t.label})),a=t.map((function(t){return t.options})),o=this.oldData.map((function(t){return t.position}));return this.render(o.map((function(t,n){return{position:o[n],label:r[n],options:a[n]}}))),this.store.map((function(t,n){return P(t,e[n],o[n])}))}},yRegions:{layerClass:"y-regions",makeElements:function(t){var n=this;return t.map((function(t){return function(t,n,i,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=t-n,o=O("rect",{className:"bar mini",styles:{fill:"rgba(228, 234, 239, 0.49)",stroke:Mt,"stroke-dasharray":i+", "+a},x:0,y:0,width:i,height:a});r.labelPos||(r.labelPos="right");var s=O("text",{className:"chart-label",x:"left"===r.labelPos?wt:i-d(e+"",4.5)-wt,y:0,dy:kt/-2+"px","font-size":kt+"px","text-anchor":"start",innerHTML:e+""}),u=O("g",{transform:"translate(0, "+n+")"});return u.appendChild(o),u.appendChild(s),u}(t.startPos,t.endPos,n.constants.width,t.label,{labelPos:t.options.labelPos})}))},animateElements:function(t){var n=m(this.oldData,t),i=_t(n,2);this.oldData=i[0];var e=(t=i[1]).map((function(t){return t.endPos})),r=t.map((function(t){return t.label})),a=t.map((function(t){return t.startPos})),o=t.map((function(t){return t.options})),s=this.oldData.map((function(t){return t.endPos})),u=this.oldData.map((function(t){return t.startPos}));this.render(s.map((function(t,n){return{startPos:u[n],endPos:s[n],label:r[n],options:o[n]}})));var c=[];return this.store.map((function(t,n){c=c.concat(function(t,n,i,e){var r=n-i,a=t.childNodes[0];return[[a,{height:r,"stroke-dasharray":a.getAttribute("width")+", "+r},Et,Dt],C(t,[0,e],[0,i],Et)]}(t,a[n],e[n],s[n]))})),c}},heatDomain:{layerClass:function(){return"heat-domain domain-"+this.constants.index},makeElements:function(t){var n=this,i=this.constants,e=i.index,r=i.colWidth,a=i.rowHeight,o=i.squareSize,s=i.xTranslate,u=0;return this.serializedSubDomains=[],t.cols.map((function(t,i){1===i&&n.labels.push(D("domain-name",s,-12,J(e,!0).toUpperCase(),{fontSize:9})),t.map((function(t,i){if(t.fill){var e=L("day",s,u,o,t.fill,{"data-date":t.yyyyMmDd,"data-value":t.dataValue,"data-day":i});n.serializedSubDomains.push(e)}u+=a})),u=0,s+=r})),this.serializedSubDomains},animateElements:function(t){if(t)return[]}},barGraph:{layerClass:function(){return"dataset-units dataset-bars dataset-"+this.constants.index},makeElements:function(t){var n=this.constants;return this.unitType="bar",this.units=t.yPositions.map((function(i,e){return function(t,n,i,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=y(n,s.zeroLine),c=bt(u,2),h=c[0],l=c[1];l-=o,0===h&&(h=s.minHeight,l-=s.minHeight);var f=O("rect",{className:"bar mini",style:"fill: "+e,"data-point-index":a,x:t,y:l,width:i,height:h});if((r+="")||r.length){f.setAttribute("y",0),f.setAttribute("x",0);var v=O("text",{className:"data-point-value",x:i/2,y:0,dy:kt/2*-1+"px","font-size":kt+"px","text-anchor":"middle",innerHTML:r}),d=O("g",{"data-point-index":a,transform:"translate("+t+", "+l+")"});return d.appendChild(f),d.appendChild(v),d}return f}(t.xPositions[e],i,t.barWidth,n.color,t.labels[e],e,t.offsets[e],{zeroLine:t.zeroLine,barsWidth:t.barsWidth,minHeight:n.minHeight})})),this.units},animateElements:function(t){var n=t.xPositions,i=t.yPositions,e=t.offsets,r=t.labels,a=this.oldData.xPositions,o=this.oldData.yPositions,s=this.oldData.offsets,u=this.oldData.labels,c=m(a,n),h=_t(c,2);a=h[0],n=h[1];var l=m(o,i),f=_t(l,2);o=f[0],i=f[1];var v=m(s,e),d=_t(v,2);s=d[0],e=d[1];var p=m(u,r),g=_t(p,2);u=g[0],this.render({xPositions:a,yPositions:o,offsets:s,labels:r=g[1],zeroLine:this.oldData.zeroLine,barsWidth:this.oldData.barsWidth,barWidth:this.oldData.barWidth});var b=[];return this.store.map((function(r,a){b=b.concat(function(t,n,i,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=y(i,(arguments.length>5&&void 0!==arguments[5]?arguments[5]:{}).zeroLine),o=At(a,2),s=o[0],u=o[1];return u-=r,"rect"!==t.nodeName?[[t.childNodes[0],{width:e,height:s},St,Dt],C(t,t.getAttribute("transform").split("(")[1].slice(0,-1),[n,u],Et)]:[[t,{width:e,height:s,x:n,y:u},St,Dt]]}(r,n[a],i[a],t.barWidth,e[a],{zeroLine:t.zeroLine}))})),b}},lineGraph:{layerClass:function(){return"dataset-units dataset-line dataset-"+this.constants.index},makeElements:function(t){var n=this.constants;return this.unitType="dot",this.paths={},n.hideLine||(this.paths=function(t,n,i){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=n.map((function(n,i){return t[i]+","+n})).join("L");e.spline&&(a=x(t,n));var o=S("M"+a,"line-graph-path",i);if(e.heatline){var s=E(r.svgDefs,i);o.style.stroke="url(#"+s+")"}var u={path:o};if(e.regionFill){var c=E(r.svgDefs,i,!0),h="M"+t[0]+","+r.zeroLine+"L"+a+"L"+t.slice(-1)[0]+","+r.zeroLine;u.region=S(h,"region-fill","none","url(#"+c+")")}return u}(t.xPositions,t.yPositions,n.color,{heatline:n.heatline,regionFill:n.regionFill,spline:n.spline},{svgDefs:n.svgDefs,zeroLine:t.zeroLine})),this.units=[],n.hideDots||(this.units=t.yPositions.map((function(i,e){return function(t,n,i,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=O("circle",{style:"fill: "+e,"data-point-index":a,cx:t,cy:n,r:i});if((r+="")||r.length){o.setAttribute("cy",0),o.setAttribute("cx",0);var s=O("text",{className:"data-point-value",x:0,y:0,dy:kt/2*-1-i+"px","font-size":kt+"px","text-anchor":"middle",innerHTML:r}),u=O("g",{"data-point-index":a,transform:"translate("+t+", "+n+")"});return u.appendChild(o),u.appendChild(s),u}return o}(t.xPositions[e],i,t.radius,n.color,n.valuesOverPoints?t.values[e]:"",e)}))),Object.values(this.paths).concat(this.units)},animateElements:function(t){var n=t.xPositions,i=t.yPositions,e=t.values,r=this.oldData.xPositions,a=this.oldData.yPositions,o=this.oldData.values,s=m(r,n),u=_t(s,2);r=u[0],n=u[1];var c=m(a,i),h=_t(c,2);a=h[0],i=h[1];var l=m(o,e),f=_t(l,2);o=f[0],this.render({xPositions:r,yPositions:a,values:e=f[1],zeroLine:this.oldData.zeroLine,radius:this.oldData.radius});var v=[];return Object.keys(this.paths).length&&(v=v.concat(function(t,n,i,e,r){var a=[],o=i.map((function(t,i){return n[i]+","+t})).join("L");if(r&&(o=x(n,i)),a.push([t.path,{d:"M"+o},350,Dt]),t.region){var s=n[0]+","+e+"L",u="L"+n.slice(-1)[0]+", "+e;a.push([t.region,{d:"M"+s+o+u},350,Dt])}return a}(this.paths,n,i,t.zeroLine,this.constants.spline))),this.units.length&&this.units.map((function(t,e){v=v.concat(function(t,n,i){return"circle"!==t.nodeName?[C(t,t.getAttribute("transform").split("(")[1].slice(0,-1),[n,i],Et)]:[[t,{cx:n,cy:i},St,Dt]]}(t,n[e],i[e]))})),v}}},Vt=function(){function t(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,i,e){return i&&t(n.prototype,i),e&&t(n,e),n}}(),qt=function(){function t(n,i){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,i));return e.type="percentage",e.setup(),e}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(t,Ft),Vt(t,[{key:"setMeasures",value:function(t){var n=this.measures;this.barOptions=t.barOptions||{};var i=this.barOptions;i.height=i.height||20,i.depth=i.depth||2,n.paddings.right=30,n.legendHeight=60,n.baseHeight=8*(i.height+.5*i.depth)}},{key:"setupComponents",value:function(){var t=this.state,n=[["percentageBars",{barHeight:this.barOptions.height,barDepth:this.barOptions.depth},function(){return{xPositions:t.xPositions,widths:t.widths,colors:this.colors}}.bind(this)]];this.components=new Map(n.map((function(t){var n=X.apply(void 0,function(t){if(Array.isArray(t)){for(var n=0,i=Array(t.length);n<t.length;n++)i[n]=t[n];return i}return Array.from(t)}(t));return[t[0],n]})))}},{key:"calc",value:function(){var n=this;(function t(n,i,e){null===n&&(n=Function.prototype);var r=Object.getOwnPropertyDescriptor(n,i);if(void 0===r){var a=Object.getPrototypeOf(n);return null===a?void 0:t(a,i,e)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(e):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"calc",this).call(this);var i=this.state;i.xPositions=[],i.widths=[];var e=0;i.sliceTotals.map((function(t){var r=n.width*t/i.grandTotal;i.widths.push(r),i.xPositions.push(e),e+=r}))}},{key:"makeDataByIndex",value:function(){}},{key:"bindTooltip",value:function(){var t=this,n=this.state;this.container.addEventListener("mousemove",(function(i){var e=t.components.get("percentageBars").store,r=i.target;if(e.includes(r)){var a=e.indexOf(r),s=o(t.container),u=o(r),c=u.left-s.left+parseInt(r.getAttribute("width"))/2;t.tip.setValues(c,u.top-s.top,{name:(t.formattedLabels&&t.formattedLabels.length>0?t.formattedLabels[a]:t.state.labels[a])+": ",value:(n.sliceTotals[a]/n.grandTotal*100).toFixed(1)+"%"}),t.tip.showTip()}}))}}]),t}(),Kt=function(){function t(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,i,e){return i&&t(n.prototype,i),e&&t(n,e),n}}(),Xt=function t(n,i,e){null===n&&(n=Function.prototype);var r=Object.getOwnPropertyDescriptor(n,i);if(void 0===r){var a=Object.getPrototypeOf(n);return null===a?void 0:t(a,i,e)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(e):void 0},$t=function(){function t(n,i){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,i));return e.type="pie",e.initTimeout=0,e.init=1,e.setup(),e}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(t,Ft),Kt(t,[{key:"configure",value:function(n){Xt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"configure",this).call(this,n),this.mouseMove=this.mouseMove.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.hoverRadio=n.hoverRadio||.1,this.config.startAngle=n.startAngle||0,this.clockWise=n.clockWise||!1}},{key:"calc",value:function(){var n=this;Xt(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"calc",this).call(this);var i=this.state;this.radius=this.height>this.width?this.center.x:this.center.y;var e=this.radius,r=this.clockWise,a=i.slicesProperties||[];i.sliceStrings=[],i.slicesProperties=[];var o=180-this.config.startAngle;i.sliceTotals.map((function(t,s){var u=o,c=t/i.grandTotal*360,h=c>180?1:0,l=r?-c:c,f=o+=l,v=p(u,e),d=p(f,e),y=n.init&&a[s],m=void 0,g=void 0;n.init?(m=y?y.startPosition:v,g=y?y.endPosition:v):(m=v,g=d);var b=360===c?function(t,n,i,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=i.x+t.x,s=i.y+t.y,u=i.x+n.x,c=2*i.y,h=i.y+n.y;return"M"+i.x+" "+i.y+"\n\t\tL"+o+" "+s+"\n\t\tA "+e+" "+e+" 0 "+a+" "+(r?1:0)+"\n\t\t"+u+" "+c+" z\n\t\tL"+o+" "+c+"\n\t\tA "+e+" "+e+" 0 "+a+" "+(r?1:0)+"\n\t\t"+u+" "+h+" z"}(m,g,n.center,n.radius,r,h):function(t,n,i,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=i.x+t.x,s=i.y+t.y,u=i.x+n.x,c=i.y+n.y;return"M"+i.x+" "+i.y+"\n\t\tL"+o+" "+s+"\n\t\tA "+e+" "+e+" 0 "+a+" "+(r?1:0)+"\n\t\t"+u+" "+c+" z"}(m,g,n.center,n.radius,r,h);i.sliceStrings.push(b),i.slicesProperties.push({startPosition:v,endPosition:d,value:t,total:i.grandTotal,startAngle:u,endAngle:f,angle:l})})),this.init=0}},{key:"setupComponents",value:function(){var t=this.state,n=[["pieSlices",{},function(){return{sliceStrings:t.sliceStrings,colors:this.colors}}.bind(this)]];this.components=new Map(n.map((function(t){var n=X.apply(void 0,function(t){if(Array.isArray(t)){for(var n=0,i=Array(t.length);n<t.length;n++)i[n]=t[n];return i}return Array.from(t)}(t));return[t[0],n]})))}},{key:"calTranslateByAngle",value:function(t){var n=this.hoverRadio,i=p(t.startAngle+t.angle/2,this.radius);return"translate3d("+i.x*n+"px,"+i.y*n+"px,0)"}},{key:"hoverSlice",value:function(t,n,i,e){if(t){var r=this.colors[n];if(i){I(t,this.calTranslateByAngle(this.state.slicesProperties[n])),t.style.fill=k(r,50);var a=o(this.svg),s=e.pageX-a.left+10,u=e.pageY-a.top-10,c=(this.formatted_labels&&this.formatted_labels.length>0?this.formatted_labels[n]:this.state.labels[n])+": ",h=(100*this.state.sliceTotals[n]/this.state.grandTotal).toFixed(1);this.tip.setValues(s,u,{name:c,value:h+"%"}),this.tip.showTip()}else I(t,"translate3d(0,0,0)"),this.tip.hideTip(),t.style.fill=r}}},{key:"bindTooltip",value:function(){this.container.addEventListener("mousemove",this.mouseMove),this.container.addEventListener("mouseleave",this.mouseLeave)}},{key:"mouseMove",value:function(t){var n=t.target,i=this.components.get("pieSlices").store,e=this.curActiveSliceIndex,r=this.curActiveSlice;if(i.includes(n)){var a=i.indexOf(n);this.hoverSlice(r,e,!1),this.curActiveSlice=n,this.curActiveSliceIndex=a,this.hoverSlice(n,a,!0,t)}else this.mouseLeave()}},{key:"mouseLeave",value:function(){this.hoverSlice(this.curActiveSlice,this.curActiveSliceIndex,!1)}}]),t}(),Qt=function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,n){var i=[],e=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(e=(o=s.next()).done)&&(i.push(o.value),!n||i.length!==n);e=!0);}catch(t){r=!0,a=t}finally{try{!e&&s.return&&s.return()}finally{if(r)throw a}}return i}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Zt=function(){function t(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,i,e){return i&&t(n.prototype,i),e&&t(n,e),n}}(),tn=function(){function t(n,i){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,i));e.type="heatmap",e.countLabel=i.countLabel||"";var r=["Sunday","Monday"],a=r.includes(i.startSubDomain)?i.startSubDomain:"Sunday";return e.startSubDomainIndex=r.indexOf(a),e.setup(),e}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(t,Pt),Zt(t,[{key:"setMeasures",value:function(t){var n=this.measures;this.discreteDomains=0===t.discreteDomains?0:1,n.paddings.top=36,n.paddings.bottom=0,n.legendHeight=24,n.baseHeight=12*It+h(n);var i=this.data,e=this.discreteDomains?12:0;this.independentWidth=12*(G(i.start,i.end)+e)+l(n)}},{key:"updateWidth",value:function(){this.baseWidth=12*((this.state.noOfWeeks?this.state.noOfWeeks:52)+(this.discreteDomains?12:0))+l(this.measures)}},{key:"prepareData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data;if(t.start&&t.end&&t.start>t.end)throw new Error("Start date cannot be greater than end date.");if(t.start||(t.start=new Date,t.start.setFullYear(t.start.getFullYear()-1)),t.end||(t.end=new Date),t.dataPoints=t.dataPoints||{},parseInt(Object.keys(t.dataPoints)[0])>1e5){var n={};Object.keys(t.dataPoints).forEach((function(i){var e=new Date(i*Rt);n[U(e)]=t.dataPoints[i]})),t.dataPoints=n}return t}},{key:"calc",value:function(){var t=this.state;t.start=_(this.data.start),t.end=_(this.data.end),t.firstWeekStart=_(t.start),t.noOfWeeks=G(t.start,t.end),t.distribution=function(t){for(var n=Math.max.apply(Math,$(t)),i=[],e=0;e<5;e++)i.push(n*(.25*e));return i}(Object.values(this.data.dataPoints)),t.domainConfigs=this.getDomains()}},{key:"setupComponents",value:function(){var t=this,n=this.state,i=this.discreteDomains?0:1,e=n.domainConfigs.map((function(e,r){return["heatDomain",{index:e.index,colWidth:12,rowHeight:12,squareSize:10,xTranslate:12*n.domainConfigs.filter((function(t,n){return n<r})).map((function(t){return t.cols.length-i})).reduce((function(t,n){return t+n}),0)},function(){return n.domainConfigs[r]}.bind(t)]}));this.components=new Map(e.map((function(t,n){var i=X.apply(void 0,function(t){if(Array.isArray(t)){for(var n=0,i=Array(t.length);n<t.length;n++)i[n]=t[n];return i}return Array.from(t)}(t));return[t[0]+"-"+n,i]})));var r=0;Ut.forEach((function(n,i){if([1,3,5].includes(i)){var e=D("subdomain-name",-6,r,n,{fontSize:10,dy:8,textAnchor:"end"});t.drawArea.appendChild(e)}r+=12}))}},{key:"update",value:function(t){t||console.error("No data to update."),this.data=this.prepareData(t),this.draw(),this.bindTooltip()}},{key:"bindTooltip",value:function(){var t=this;this.container.addEventListener("mousemove",(function(n){t.components.forEach((function(i){var e=n.target;if(i.store.includes(e)){var r=e.getAttribute("data-value"),a=e.getAttribute("data-date").split("-"),o=J(parseInt(a[1])-1,!0),s=t.container.getBoundingClientRect(),u=e.getBoundingClientRect(),c=parseInt(n.target.getAttribute("width"));t.tip.setValues(u.left-s.left+c/2,u.top-s.top,{name:" on "+o+" "+a[0]+", "+a[2],value:r+" "+t.countLabel,valueFirst:1},[]),t.tip.showTip()}}))}))}},{key:"renderLegend",value:function(){var t=this;this.legendArea.textContent="";var n=0,i=D("subdomain-name",n,12,"Less",{fontSize:11,dy:9});n=30,this.legendArea.appendChild(i),this.colors.slice(0,5).map((function(i,e){var r=L("heatmap-legend-unit",n+15*e,12,10,i);t.legendArea.appendChild(r)}));var e=D("subdomain-name",n+75+3,12,"More",{fontSize:11,dy:9});this.legendArea.appendChild(e)}},{key:"getDomains",value:function(){for(var t=this.state,n=[t.start.getMonth(),t.start.getFullYear()],i=n[0],e=n[1],r=[t.end.getMonth(),t.end.getFullYear()],a=r[0]-i+1+12*(r[1]-e),o=[],s=_(t.start),u=0;u<a;u++){var c=t.end;if(!Y(s,t.end)){var h=[s.getMonth(),s.getFullYear()];c=V(h[0],h[1])}o.push(this.getDomainConfig(s,c)),K(c,1),s=c}return o}},{key:"getDomainConfig",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=[t.getMonth(),t.getFullYear()],e=i[0],r=i[1],a=q(t),o={index:e,cols:[]};K(n=_(n)||V(e,r),1);for(var s=G(a,n),u=[],c=void 0,h=0;h<s;h++)c=this.getCol(a,e),u.push(c),K(a=new Date(c[It-1].yyyyMmDd),1);return void 0!==c[It-1].dataValue&&(K(a,1),u.push(this.getCol(a,e,!0))),o.cols=u,o}},{key:"getCol",value:function(t,n){for(var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],e=this.state,r=_(t),a=[],o=0;o<It;o++,K(r,1)){var s={},u=r>=e.start&&r<=e.end;i||r.getMonth()!==n||!u?s.yyyyMmDd=U(r):s=this.getSubDomainConfig(r),a.push(s)}return a}},{key:"getSubDomainConfig",value:function(t){var n=U(t),i=this.data.dataPoints[n];return{yyyyMmDd:n,dataValue:i||0,fill:this.colors[ot(i,this.state.distribution)]}}}]),t}(),nn=function(){function t(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,i,e){return i&&t(n.prototype,i),e&&t(n,e),n}}(),en=function t(n,i,e){null===n&&(n=Function.prototype);var r=Object.getOwnPropertyDescriptor(n,i);if(void 0===r){var a=Object.getPrototypeOf(n);return null===a?void 0:t(a,i,e)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(e):void 0},rn=function(){function t(n,i){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,i));return e.barOptions=i.barOptions||{},e.lineOptions=i.lineOptions||{},e.type=i.type||"line",e.init=1,e.setup(),e}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(t,Pt),nn(t,[{key:"setMeasures",value:function(){this.data.datasets.length<=1&&(this.config.showLegend=0,this.measures.paddings.bottom=30)}},{key:"configure",value:function(n){en(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"configure",this).call(this,n),n.axisOptions=n.axisOptions||{},n.tooltipOptions=n.tooltipOptions||{},this.config.xAxisMode=n.axisOptions.xAxisMode||"span",this.config.yAxisMode=n.axisOptions.yAxisMode||"span",this.config.xIsSeries=n.axisOptions.xIsSeries||0,this.config.shortenYAxisNumbers=n.axisOptions.shortenYAxisNumbers||0,this.config.formatTooltipX=n.tooltipOptions.formatTooltipX,this.config.formatTooltipY=n.tooltipOptions.formatTooltipY,this.config.valuesOverPoints=n.valuesOverPoints}},{key:"prepareData",value:function(){return st(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data,this.type)}},{key:"prepareFirstData",value:function(){return ut(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data)}},{key:"calc",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.calcXPositions(),t||this.calcYAxisParameters(this.getAllYValues(),"line"===this.type),this.makeDataByIndex()}},{key:"calcXPositions",value:function(){var t=this.state,n=this.data.labels;t.datasetLength=n.length,t.unitWidth=this.width/t.datasetLength,t.xOffset=t.unitWidth/2,t.xAxis={labels:n,positions:n.map((function(n,i){return f(t.xOffset+i*t.unitWidth)}))}}},{key:"calcYAxisParameters",value:function(t){var n=nt(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"false"),i=this.height/rt(n),e=et(n)*i,r=this.height-it(n)*e;this.state.yAxis={labels:n,positions:n.map((function(t){return r-t*i})),scaleMultiplier:i,zeroLine:r},this.calcDatasetPoints(),this.calcYExtremes(),this.calcYRegions()}},{key:"calcDatasetPoints",value:function(){var t=this.state,n=function(n){return n.map((function(n){return at(n,t.yAxis)}))};t.datasets=this.data.datasets.map((function(t,i){var e=t.values,r=t.cumulativeYs||[];return{name:t.name,index:i,chartType:t.chartType,values:e,yPositions:n(e),cumulativeYs:r,cumulativeYPos:n(r)}}))}},{key:"calcYExtremes",value:function(){var t=this.state;this.barOptions.stacked?t.yExtremes=t.datasets[t.datasets.length-1].cumulativeYPos:(t.yExtremes=new Array(t.datasetLength).fill(9999),t.datasets.map((function(n){n.yPositions.map((function(n,i){n<t.yExtremes[i]&&(t.yExtremes[i]=n)}))})))}},{key:"calcYRegions",value:function(){var t=this.state;this.data.yMarkers&&(this.state.yMarkers=this.data.yMarkers.map((function(n){return n.position=at(n.value,t.yAxis),n.options||(n.options={}),n}))),this.data.yRegions&&(this.state.yRegions=this.data.yRegions.map((function(n){return n.startPos=at(n.start,t.yAxis),n.endPos=at(n.end,t.yAxis),n.options||(n.options={}),n})))}},{key:"getAllYValues",value:function(){var t,n=this,i="values";if(this.barOptions.stacked){i="cumulativeYs";var e=new Array(this.state.datasetLength).fill(0);this.data.datasets.map((function(t,r){var a=n.data.datasets[r].values;t[i]=e=e.map((function(t,n){return t+a[n]}))}))}var r=this.data.datasets.map((function(t){return t[i]}));return this.data.yMarkers&&r.push(this.data.yMarkers.map((function(t){return t.value}))),this.data.yRegions&&this.data.yRegions.map((function(t){r.push([t.end,t.start])})),(t=[]).concat.apply(t,ct(r))}},{key:"setupComponents",value:function(){var t=this,n=[["yAxis",{mode:this.config.yAxisMode,width:this.width,shortenNumbers:this.config.shortenYAxisNumbers},function(){return this.state.yAxis}.bind(this)],["xAxis",{mode:this.config.xAxisMode,height:this.height},function(){var t=this.state;return t.xAxis.calcLabels=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],e=t/n.length;e<=0&&(e=1);var r=e/7;return n.map((function(t,n){return(t+="").length>r&&(i?n%Math.ceil(t.length/r)!=0&&(t=""):t=r-3>0?t.slice(0,r-3)+" ...":t.slice(0,r)+".."),t}))}(this.width,t.xAxis.labels,this.config.xIsSeries),t.xAxis}.bind(this)],["yRegions",{width:this.width,pos:"right"},function(){return this.state.yRegions}.bind(this)]],i=this.state.datasets.filter((function(t){return"bar"===t.chartType})),e=this.state.datasets.filter((function(t){return"line"===t.chartType})),r=i.map((function(n){var e=n.index;return["barGraph-"+n.index,{index:e,color:t.colors[e],stacked:t.barOptions.stacked,valuesOverPoints:t.config.valuesOverPoints,minHeight:0*t.height},function(){var t=this.state,n=t.datasets[e],r=this.barOptions.stacked,a=t.unitWidth*(1-(this.barOptions.spaceRatio||.5)),o=a/(r?1:i.length),s=t.xAxis.positions.map((function(t){return t-a/2}));r||(s=s.map((function(t){return t+o*e})));var u=new Array(t.datasetLength).fill("");this.config.valuesOverPoints&&(u=r&&n.index===t.datasets.length-1?n.cumulativeYs:n.values);var c=new Array(t.datasetLength).fill(0);return r&&(c=n.yPositions.map((function(t,i){return t-n.cumulativeYPos[i]}))),{xPositions:s,yPositions:n.yPositions,offsets:c,labels:u,zeroLine:t.yAxis.zeroLine,barsWidth:a,barWidth:o}}.bind(t)]})),a=e.map((function(n){var i=n.index;return["lineGraph-"+n.index,{index:i,color:t.colors[i],svgDefs:t.svgDefs,heatline:t.lineOptions.heatline,regionFill:t.lineOptions.regionFill,spline:t.lineOptions.spline,hideDots:t.lineOptions.hideDots,hideLine:t.lineOptions.hideLine,valuesOverPoints:t.config.valuesOverPoints},function(){var t=this.state,n=t.datasets[i];return{xPositions:t.xAxis.positions,yPositions:n.yPositions,values:n.values,zeroLine:t.yAxis.positions[0]<t.yAxis.zeroLine?t.yAxis.positions[0]:t.yAxis.zeroLine,radius:this.lineOptions.dotSize||4}}.bind(t)]})),o=[["yMarkers",{width:this.width,pos:"right"},function(){return this.state.yMarkers}.bind(this)]];n=n.concat(r,a,o);var s=["yMarkers","yRegions"];this.dataUnitComponents=[],this.components=new Map(n.filter((function(n){return!s.includes(n[0])||t.state[n[0]]})).map((function(n){var i=X.apply(void 0,ct(n));return(n[0].includes("lineGraph")||n[0].includes("barGraph"))&&t.dataUnitComponents.push(i),[n[0],i]})))}},{key:"makeDataByIndex",value:function(){var t=this;this.dataByIndex={};var n=this.state,i=this.config.formatTooltipX,e=this.config.formatTooltipY;n.xAxis.labels.map((function(r,a){var o=t.state.datasets.map((function(n,i){var r=n.values[a];return{title:n.name,value:r,yPos:n.yPositions[a],color:t.colors[i],formatted:e?e(r):r}}));t.dataByIndex[a]={label:r,formattedLabel:i?i(r):r,xPos:n.xAxis.positions[a],values:o,yExtreme:n.yExtremes[a]}}))}},{key:"bindTooltip",value:function(){var t=this;this.container.addEventListener("mousemove",(function(n){var i=t.measures,e=o(t.container),r=n.pageX-e.left-c(i),a=n.pageY-e.top;a<t.height+u(i)&&a>u(i)?t.mapTooltipXPosition(r):t.tip.hideTip()}))}},{key:"mapTooltipXPosition",value:function(t){var n=this.state;if(n.yExtremes){var i=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],e=n.reduce((function(n,i){return Math.abs(i-t)<Math.abs(n-t)?i:n}),[]);return i?n.indexOf(e):e}(t,n.xAxis.positions,!0),e=this.dataByIndex[i];this.tip.setValues(e.xPos+this.tip.offset.x,e.yExtreme+this.tip.offset.y,{name:e.formattedLabel,value:""},e.values,i),this.tip.showTip()}}},{key:"renderLegend",value:function(){var t=this,n=this.data;n.datasets.length>1&&(this.legendArea.textContent="",n.datasets.map((function(n,i){var e=function(t,n,i){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",r=arguments[4];r=arguments.length>5&&void 0!==arguments[5]&&arguments[5]?g(r,15):r;var a={className:"legend-bar",x:0,y:0,width:i,height:"2px",fill:e},o=O("text",{className:"legend-dataset-text",x:0,y:0,dy:2*kt+"px","font-size":1.2*kt+"px","text-anchor":"start",fill:Ot,innerHTML:r}),s=O("g",{transform:"translate("+t+", "+n+")"});return s.appendChild(O("rect",a)),s.appendChild(o),s}(100*i,"0",100,t.colors[i],n.name,t.config.truncateLegends);t.legendArea.appendChild(e)})))}},{key:"makeOverlay",value:function(){var t=this;this.init?this.init=0:(this.overlayGuides&&this.overlayGuides.forEach((function(t){var n=t.overlay;n.parentNode.removeChild(n)})),this.overlayGuides=this.dataUnitComponents.map((function(t){return{type:t.unitType,overlay:void 0,units:t.units}})),void 0===this.state.currentIndex&&(this.state.currentIndex=this.state.datasetLength-1),this.overlayGuides.map((function(n){n.overlay=jt[n.type](n.units[t.state.currentIndex]),t.drawArea.appendChild(n.overlay)})))}},{key:"updateOverlayGuides",value:function(){this.overlayGuides&&this.overlayGuides.forEach((function(t){var n=t.overlay;n.parentNode.removeChild(n)}))}},{key:"bindOverlay",value:function(){var t=this;this.parent.addEventListener("data-select",(function(){t.updateOverlay()}))}},{key:"bindUnits",value:function(){var t=this;this.dataUnitComponents.map((function(n){n.units.map((function(n){n.addEventListener("click",(function(){var i=n.getAttribute("data-point-index");t.setCurrentDataPoint(i)}))}))})),this.tip.container.addEventListener("click",(function(){var n=t.tip.container.getAttribute("data-point-index");t.setCurrentDataPoint(n)}))}},{key:"updateOverlay",value:function(){var t=this;this.overlayGuides.map((function(n){Tt[n.type](n.units[t.state.currentIndex],n.overlay)}))}},{key:"onLeftArrow",value:function(){this.setCurrentDataPoint(this.state.currentIndex-1)}},{key:"onRightArrow",value:function(){this.setCurrentDataPoint(this.state.currentIndex+1)}},{key:"getDataPoint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.currentIndex,n=this.state;return{index:t,label:n.xAxis.labels[t],values:n.datasets.map((function(n){return n.values[t]}))}}},{key:"setCurrentDataPoint",value:function(t){var n=this.state;(t=parseInt(t))<0&&(t=0),t>=n.xAxis.labels.length&&(t=n.xAxis.labels.length-1),t!==n.currentIndex&&(n.currentIndex=t,function(t,n,i){var e=document.createEvent("HTMLEvents");for(var r in e.initEvent("data-select",!0,!0),i)e[r]=i[r];t.dispatchEvent(e)}(this.parent,0,this.getDataPoint()))}},{key:"addDataPoint",value:function(n,i){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.datasetLength;en(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addDataPoint",this).call(this,n,i,e),this.data.labels.splice(e,0,n),this.data.datasets.map((function(t,n){t.values.splice(e,0,i[n])})),this.update(this.data)}},{key:"removeDataPoint",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.datasetLength-1;this.data.labels.length<=1||(en(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeDataPoint",this).call(this,n),this.data.labels.splice(n,1),this.data.datasets.map((function(t){t.values.splice(n,1)})),this.update(this.data))}},{key:"updateDataset",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.data.datasets[n].values=t,this.update(this.data)}},{key:"updateDatasets",value:function(t){this.data.datasets.map((function(n,i){t[i]&&(n.values=t[i])})),this.update(this.data)}}]),t}(),an=function(){function t(t,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,i,e){return i&&t(n.prototype,i),e&&t(n,e),n}}(),on=function t(n,i,e){null===n&&(n=Function.prototype);var r=Object.getOwnPropertyDescriptor(n,i);if(void 0===r){var a=Object.getPrototypeOf(n);return null===a?void 0:t(a,i,e)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(e):void 0},sn=function(){function t(n,i){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,i));return e.type="donut",e.initTimeout=0,e.init=1,e.setup(),e}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(t,Ft),an(t,[{key:"configure",value:function(n){on(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"configure",this).call(this,n),this.mouseMove=this.mouseMove.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.hoverRadio=n.hoverRadio||.1,this.config.startAngle=n.startAngle||0,this.clockWise=n.clockWise||!1,this.strokeWidth=n.strokeWidth||30}},{key:"calc",value:function(){var n=this;on(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"calc",this).call(this);var i=this.state;this.radius=this.height>this.width?this.center.x-this.strokeWidth/2:this.center.y-this.strokeWidth/2;var e=this.radius,r=this.clockWise,a=i.slicesProperties||[];i.sliceStrings=[],i.slicesProperties=[];var o=180-this.config.startAngle;i.sliceTotals.map((function(t,s){var u=o,c=t/i.grandTotal*360,h=c>180?1:0,l=r?-c:c,f=o+=l,v=p(u,e),d=p(f,e),y=n.init&&a[s],m=void 0,g=void 0;n.init?(m=y?y.startPosition:v,g=y?y.endPosition:v):(m=v,g=d);var b=360===c?function(t,n,i,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=i.x+t.x,s=i.y+t.y,u=i.x+n.x,c=2*e+s,h=i.y+t.y;return"M"+o+" "+s+"\n\t\tA "+e+" "+e+" 0 "+a+" "+(r?1:0)+"\n\t\t"+u+" "+c+"\n\t\tM"+o+" "+c+"\n\t\tA "+e+" "+e+" 0 "+a+" "+(r?1:0)+"\n\t\t"+u+" "+h}(m,g,n.center,n.radius,n.clockWise,h):function(t,n,i,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=i.x+t.x,s=i.y+t.y,u=i.x+n.x,c=i.y+n.y;return"M"+o+" "+s+"\n\t\tA "+e+" "+e+" 0 "+a+" "+(r?1:0)+"\n\t\t"+u+" "+c}(m,g,n.center,n.radius,n.clockWise,h);i.sliceStrings.push(b),i.slicesProperties.push({startPosition:v,endPosition:d,value:t,total:i.grandTotal,startAngle:u,endAngle:f,angle:l})})),this.init=0}},{key:"setupComponents",value:function(){var t=this.state,n=[["donutSlices",{},function(){return{sliceStrings:t.sliceStrings,colors:this.colors,strokeWidth:this.strokeWidth}}.bind(this)]];this.components=new Map(n.map((function(t){var n=X.apply(void 0,function(t){if(Array.isArray(t)){for(var n=0,i=Array(t.length);n<t.length;n++)i[n]=t[n];return i}return Array.from(t)}(t));return[t[0],n]})))}},{key:"calTranslateByAngle",value:function(t){var n=this.hoverRadio,i=p(t.startAngle+t.angle/2,this.radius);return"translate3d("+i.x*n+"px,"+i.y*n+"px,0)"}},{key:"hoverSlice",value:function(t,n,i,e){if(t){var r=this.colors[n];if(i){I(t,this.calTranslateByAngle(this.state.slicesProperties[n])),t.style.stroke=k(r,50);var a=o(this.svg),s=e.pageX-a.left+10,u=e.pageY-a.top-10,c=(this.formatted_labels&&this.formatted_labels.length>0?this.formatted_labels[n]:this.state.labels[n])+": ",h=(100*this.state.sliceTotals[n]/this.state.grandTotal).toFixed(1);this.tip.setValues(s,u,{name:c,value:h+"%"}),this.tip.showTip()}else I(t,"translate3d(0,0,0)"),this.tip.hideTip(),t.style.stroke=r}}},{key:"bindTooltip",value:function(){this.container.addEventListener("mousemove",this.mouseMove),this.container.addEventListener("mouseleave",this.mouseLeave)}},{key:"mouseMove",value:function(t){var n=t.target,i=this.components.get("donutSlices").store,e=this.curActiveSliceIndex,r=this.curActiveSlice;if(i.includes(n)){var a=i.indexOf(n);this.hoverSlice(r,e,!1),this.curActiveSlice=n,this.curActiveSliceIndex=a,this.hoverSlice(n,a,!0,t)}else this.mouseLeave()}},{key:"mouseLeave",value:function(){this.hoverSlice(this.curActiveSlice,this.curActiveSliceIndex,!1)}}]),t}(),un={bar:rn,line:rn,percentage:qt,heatmap:tn,pie:$t,donut:sn},cn=function t(n,i){return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"line",n=arguments[1],i=arguments[2];return"axis-mixed"===t?(i.type="line",new rn(n,i)):un[t]?new un[t](n,i):void console.error("Undefined chart type: "+t)}(i.type,n,i)};const hn=class{constructor(n){t(this,n)}handleWatchDatasets(){this.chart.update({labels:this.labels,datasets:this.datasets})}componentDidLoad(){const t={labels:this.labels,datasets:this.datasets};setTimeout(()=>{this.chart=new cn(this.chartEl,{data:t,type:"line",height:258,colors:["#38bdd3","#fe6e71","#53c78e","#fce170"]})},100)}render(){return n(i,null,n("div",{ref:t=>this.chartEl=t,class:"ct-chart ct-perfect-fourth"}))}static get watchers(){return{datasets:["handleWatchDatasets"]}}};hn.style=':host{display:block}.chart-container{position:relative;font-family:-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif}.chart-container .axis,.chart-container .chart-label{fill:#555b51}.chart-container .axis line,.chart-container .chart-label line{stroke:#dadada}.chart-container .dataset-units circle{stroke:#fff;stroke-width:2}.chart-container .dataset-units path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container .dataset-path{stroke-width:2px}.chart-container .path-group path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container line.dashed{stroke-dasharray:5, 3}.chart-container .axis-line .specific-value{text-anchor:start}.chart-container .axis-line .y-line{text-anchor:end}.chart-container .axis-line .x-line{text-anchor:middle}.chart-container .legend-dataset-text{fill:#6c7680;font-weight:600}.graph-svg-tip{position:absolute;z-index:1;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0, 0, 0, .8);border-radius:3px}.graph-svg-tip ol,.graph-svg-tip ul{padding-left:0;display:-webkit-box;display:-ms-flexbox;display:flex}.graph-svg-tip ul.data-point-list li{min-width:90px;-webkit-box-flex:1;-ms-flex:1;flex:1;font-weight:600}.graph-svg-tip strong{color:#dfe2e5;font-weight:600}.graph-svg-tip .svg-pointer{position:absolute;height:5px;margin:0 0 0 -5px;content:" ";border:5px solid transparent;border-top-color:rgba(0, 0, 0, .8)}.graph-svg-tip.comparison{padding:0;text-align:left;pointer-events:none}.graph-svg-tip.comparison .title{display:block;padding:10px;margin:0;font-weight:600;line-height:1;pointer-events:none}.graph-svg-tip.comparison ul{margin:0;white-space:nowrap;list-style:none}.graph-svg-tip.comparison li{display:inline-block;padding:5px 10px}';const ln=class{constructor(n){t(this,n),this.fetchingApi=!1,this.applications=[],this.getApplications=()=>{this.fetchingApi=!0,e().list().then(this.handleSuccess).catch(this.handleError).finally(()=>this.fetchingApi=!1)},this.handleSuccess=t=>{this.applications=t.data},this.handleError=t=>{if(!t.error)return r().danger("Oops! Something went wrong. Please refresh and try again"),console.log(t);r().danger(t.error)}}componentWillLoad(){this.getApplications()}showApplications(){return this.fetchingApi?n("ta-loader",null):n("div",{class:"application-list-wrapper"},this.applications.slice(0,4).map(t=>n("ta-application-card",{application:t})))}render(){return n(i,null,n("div",{class:"title"},n("div",{class:"title-text"},"Recent Applications"),n("div",{class:"title-action"},n("stencil-route-link",{url:"/applications"},n("ta-button",{small:!0,color:"dark-grey"},"View All")))),n("div",{class:"applications-list"},this.showApplications()))}};ln.style=":host{display:block;--ta-recent-application-list-margin:30px 0 0 0;margin:var(--ta-recent-application-list-margin)}.title-action{margin-left:35px}.title{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.title-text{font-size:24px;font-weight:bold;font-stretch:normal;font-style:normal;line-height:normal;letter-spacing:-0.09px;color:var(--primary-text-color)}.applications-list{margin-top:33px;min-height:120px;position:relative}.application-list-wrapper{display:grid;grid-template-columns:auto auto auto auto;grid-gap:20px}a{text-decoration:none}@media (max-width: 1400px){.application-list-wrapper{grid-template-columns:auto auto}}@media (max-width: 768px){.application-list-wrapper{grid-template-columns:auto}}@media (max-width: 364px){.title-action{display:none}}";const fn=class{constructor(n){t(this,n)}render(){return n(i,null,n("div",{class:"wrapper"},n("div",{class:"icon-section"},n("div",{class:"icon-wrapper"},n("ta-icon",{icon:this.icon}))),n("div",{class:"info-section"},n("div",{class:"label"},this.label),n("div",{class:"value"},this.value))))}};fn.style=":host{display:block;border-radius:12px;-webkit-box-shadow:0 4px 12px 0 rgba(0, 0, 0, 0.14);box-shadow:0 4px 12px 0 rgba(0, 0, 0, 0.14);background-color:#ffffff}.wrapper{padding:20px 23px;display:-ms-flexbox;display:flex}.icon-wrapper{width:38px;height:38px;border-radius:6px;border:solid 2px #e2e6ef;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}.info-section{margin-left:20px}.label{font-size:14px;font-weight:bold;font-stretch:normal;font-style:normal;line-height:normal;letter-spacing:-0.05px;color:#a6b7c7}.value{font-size:18px;font-weight:bold;font-stretch:normal;font-style:normal;line-height:normal;letter-spacing:-0.06px;color:var(--primary-text-color);margin-top:2px}";export{hn as ta_line_graph,ln as ta_recent_applications_list,fn as ta_stat_card}