System.register(["./p-05ba43f8.system.js","./p-aec35cab.system.js","./p-f2ebe6a2.system.js","./p-16d83290.system.js","./p-4919965f.system.js"],(function(t){"use strict";var e,s,a,r,i,o,n,d,l,c,h,u,p,m,b,f,g,w;return{setters:[function(t){e=t.r;s=t.h;a=t.H;r=t.d;i=t.g},function(t){o=t.m;n=t.i;d=t.a},function(t){l=t.g;c=t.B;h=t.p;u=t.b;p=t.d;m=t.D;b=t.s;f=t.a},function(t){g=t.t},function(t){w=t.U}],execute:function(){function v(){function t(t){localStorage.setItem("amountDue",t.data.amountDue.toString())}return Object.freeze({getBilling(){return l(`${c()}/invoices`)},setBilling(){this.getBilling().then(t)},listCards(){return l(`${c()}/cards`)},createCard(t){return h(`${c()}/cards`,t)},updateCard(t,e){return u(`${c()}/cards/${t}`,e)},deleteCard(t){return p(`${c()}/cards/${t}`)}})}const y=":host{display:block}ta-button{--ta-button-width:150px}.cards{margin-bottom:30px}stripe-elements::part(stripe){border-radius:var(--border-radius);border:solid 2px var(--light-border-color);-webkit-box-shadow:none;box-shadow:none;height:42px;display:-ms-flexbox;display:flex;-ms-flex-flow:column;flex-flow:column;-ms-flex-pack:center;justify-content:center;background-color:var(--ta-input-bg-color, var(--primary-input-bg-color));color:var(--primary-text-color);width:100%;font-size:20px}stripe-elements[complete]::part(stripe){border-color:var(--material-green-a700, #00C853)}stripe-elements[invalid]::part(stripe){border-color:var(--material-amber-a700, #FFAB00)}stripe-elements[error]::part(stripe){border-color:var(--primary-error-color)}stripe-elements::part(error){padding:0;font-size:14px;font-weight:500;color:var(--primary-error-color)}.spin-icon{position:absolute;margin:auto;width:15px;height:15px;top:12px;right:20px;border:solid 2px #fff;border-top-color:#ff3b3b;border-left-color:#ff3b3b;border-right-color:#ff3b3b;border-radius:20px;-webkit-animation:loading-spinner 500ms linear infinite;animation:loading-spinner 500ms linear infinite}";const S=t("billing_setting_view",class{constructor(t){e(this,t);this.cards=[];this.fetchingCards=false;this.creatingCard=false;this.formError="";this.getCards=()=>{this.fetchingCards=true;v().listCards().then(this.handleSuccess).catch(this.handleError).finally(()=>this.fetchingCards=false)};this.handleSuccess=t=>{this.cards=t.data};this.handleError=t=>{if(!t.error){g().danger(m);return console.log(t)}this.formError=t.error};this.onSubmit=t=>{t.preventDefault();this.creatingCard=true;this.stripeEl.createToken().then(this.createCard).then(this.handleCreateCardSuccess).catch(this.handleError).finally(()=>this.creatingCard=false)};this.createCard=t=>{const e={token:t.token.id,brand:t.token.card.brand,lastFour:parseInt(t.token.card.last4),exp:`${t.token.card.exp_month}/${t.token.card.exp_year}`};return v().createCard(e)};this.handleCreateCardSuccess=t=>{g().success("Card was added!");this.cards=[...this.cards,t.data];this.stripeEl.reset()};this.deleteCard=t=>{const e=t.detail;v().deleteCard(e).then(()=>this.handleDeleteCardSuccess(e)).catch(this.handleError)};this.handleDeleteCardSuccess=t=>{g().success("Card was deleted");this.cards=this.cards.filter(e=>e.id!==t)};this.handleUpdateCardSuccess=t=>{g().success("Card set as default");const e=this.cards.map(e=>Object.assign(Object.assign({},e),{isDefault:e.id===t}));this.cards=[...e]};this.setDefaultCard=t=>{const e=t.detail;const s={isDefault:true};v().updateCard(e,s).then(()=>this.handleUpdateCardSuccess(e)).catch(this.handleError)}}componentWillLoad(){this.getCards()}render(){return s(a,null,s("ta-card",null,s("ta-form-label",null,"Cards"),this.fetchingCards?s("ta-loader",null):s("div",{class:"cards"},this.cards.map(t=>s("ta-billing-card",{key:t.id,card:t,onTaSetDefaultClick:this.setDefaultCard,onTaDeleteClick:this.deleteCard}))),s("ta-form-label",null,"Add Card"),s("ta-form",{onTaSubmit:t=>this.onSubmit(t)},s("div",{style:{position:"relative"}},s("stripe-elements",{onChange:()=>this.formError="","show-error":true,ref:t=>this.stripeEl=t,"publishable-key":b()})),s("ta-error",{error:this.formError}),s("ta-button",{loading:this.creatingCard,onTaClick:t=>this.onSubmit(t)},"Add Card"))))}});S.style=y;const P="hr{border:solid 1px #e2e6ef;margin:30px 0}ta-button{--ta-button-width:150px}ta-button.update-password-btn{--ta-button-width:200px}";const E={fullName:"",email:"",oldPassword:"",password:"",serverError:""};const C={oldPassword:"",password:"",fetchingApi:false};const j=t("personal_setting_view",class{constructor(t){e(this,t);this.initialMe=o();this.me=this.initialMe;this.formErr=E;this.updatingUser=false;this.updatePasswordState=C;this.onSubmit=t=>{t.preventDefault();this.validate().then(this.updateUser).catch(this.handleValidationErrors)};this.updateUser=()=>{this.updatingUser=true;const t=Object.assign(Object.assign({},this.me),{firstName:this.fullName.split(" ")[0],lastName:this.getLastName()});w().updateUser(this.me.id,t).then(this.onSuccess).catch(this.handleError).finally(()=>this.updatingUser=false)};this.onSuccess=t=>{g().success(`Your info was updated!`);localStorage.setItem("me",JSON.stringify(t.data))};this.handleError=t=>{if(!t.error){this.formErr.serverError="Oops! Something went wrong. Please refresh and try again";return console.log(t)}const e=t.error;if(e.includes("email is taken")){this.formErr=Object.assign(Object.assign({},this.formErr),{email:"Email is taken"});return}if(e.includes("invalid credentials")){this.formErr=Object.assign(Object.assign({},this.formErr),{oldPassword:"password is incorrect"});return}g().danger(e)};this.handleValidationErrors=t=>{this.formErr=t};this.onUpdatePasswordSubmit=t=>{t.preventDefault();this.validateUpdatePassword().then(this.updatePassword).catch(this.handleValidationErrors)};this.updatePassword=()=>{this.updatePasswordState.fetchingApi=true;const{password:t,oldPassword:e}=this.updatePasswordState;const s={userId:this.me.id,oldPassword:e,password:t};w().updatePassword(s).then(this.handleUpdatePasswordSuccess).catch(this.handleError).finally(()=>this.updatePasswordState.fetchingApi=false)};this.handleUpdatePasswordSuccess=()=>{g().success("password was updated");this.updatePasswordState=C};this.getLastName=()=>{const t=this.fullName.split(" ");t.shift();return t.join(" ")};this.updatePasswordField=(t,e)=>{this.formErr=E;this.updatePasswordState=Object.assign(Object.assign({},this.updatePasswordState),{[t]:e})};this.updateMe=(t,e)=>{this.formErr=E;if(t==="fullName"){const t=e.split(" ")[0];const s=e.split(" ");s.shift();const a=s.join(" ");this.me=Object.assign(Object.assign({},this.me),{firstName:t,lastName:a});return}this.me=Object.assign(Object.assign({},this.me),{[t]:e})};this.validate=()=>{const{me:t}=this;let e={};if(!this.fullName||this.fullName===""){e=Object.assign(Object.assign({},e),{fullName:"Full name is required"})}if(!n(this.fullName)){e=Object.assign(Object.assign({},e),{fullName:"Please enter your full name (first & last name)."})}if(t.email===""){e=Object.assign(Object.assign({},e),{email:"Email is required"})}if(!d(t.email)){e=Object.assign(Object.assign({},e),{email:"Please enter a valid email address"})}return Object.keys(e).length===0?Promise.resolve():Promise.reject(e)};this.validateUpdatePassword=()=>{const{password:t,oldPassword:e}=this.updatePasswordState;let s={};if(e===""){s=Object.assign(Object.assign({},s),{oldPassword:"Old password is required"})}if(t===""){s=Object.assign(Object.assign({},s),{password:"Password is required"})}if(t.length<7){s=Object.assign(Object.assign({},s),{password:"Password must be at least 7 characters long"})}return Object.keys(s).length===0?Promise.resolve():Promise.reject(s)}}get fullName(){return`${this.me.firstName} ${this.me.lastName}`.trimRight()}get hasNotFilledOutPasswordFields(){return!this.updatePasswordState.oldPassword||!this.updatePasswordState.password}get hasNotChangedPersonalInfo(){return JSON.stringify(this.me)===JSON.stringify(this.initialMe)}render(){return s(a,null,s("ta-card",null,s("ta-form-label",null,"Personal Info"),s("form",{onSubmit:this.onSubmit},s("ta-input",{onTaInput:t=>this.updateMe("fullName",t.detail),value:this.fullName,error:this.formErr.fullName,label:"Full Name"}),s("ta-input",{onTaInput:t=>this.updateMe("email",t.detail),value:this.me.email,error:this.formErr.email,label:"Email"}),s("ta-button",{disabled:this.hasNotChangedPersonalInfo,onTaClick:this.onSubmit,type:"submit",loading:this.updatingUser},"Update")),s("hr",null),s("ta-form-label",null,"Update Password"),s("form",null,s("ta-input",{onTaInput:t=>this.updatePasswordField("oldPassword",t.detail),value:this.updatePasswordState.oldPassword,label:"Current Password",error:this.formErr.oldPassword,type:"password"}),s("ta-input",{error:this.formErr.password,value:this.updatePasswordState.password,type:"password",onTaInput:t=>this.updatePasswordField("password",t.detail),label:"Update Password"}),s("ta-button",{disabled:this.hasNotFilledOutPasswordFields,onTaClick:this.onUpdatePasswordSubmit,loading:this.updatePasswordState.fetchingApi,class:"update-password-btn"},"Update Password"))))}});j.style=P;function O(){return Object.freeze({setStorage(t){return f(`${c()}/spaces`,t)},update(t){return f(`${c()}/spaces`,{email:t})}})}const x=":host{display:block}ta-button{--ta-button-width:150px}";const N={email:"",serverError:""};const k=t("space_setting_view",class{constructor(t){e(this,t);this.initialSpace=o().space;this.space=this.initialSpace;this.updatingSpace=false;this.formErr=N;this.onSubmit=t=>{t.preventDefault();this.validate().then(this.updateSpace).catch(t=>this.formErr=t).finally(()=>this.updatingSpace=false)};this.updateSpace=()=>{this.updatingSpace=true;return O().update(this.space.email).then(this.handleSuccess).catch(this.handleError)};this.handleSuccess=t=>{const e=o();e.space=t.data;localStorage.setItem("me",JSON.stringify(e));g().success("space was updated")};this.handleError=t=>{if(!t.error){this.formErr.serverError="Oops! Something went wrong. Please refresh and try again";return console.log(t)}const e=t.error;if(e.includes("email is taken")){this.formErr=Object.assign(Object.assign({},this.formErr),{email:"Email is taken"});return}g().danger(e)};this.validate=()=>{const{space:t}=this;let e={};if(t.email===""){e=Object.assign(Object.assign({},e),{email:"Email is required"})}if(!d(t.email)){e=Object.assign(Object.assign({},e),{email:"Please enter a valid email address"})}return Object.keys(e).length===0?Promise.resolve():Promise.reject(e)};this.handleUpdateSpace=(t,e)=>{this.formErr=N;this.space=Object.assign(Object.assign({},this.space),{[t]:e})}}get hasNotUpdatedSpace(){return JSON.stringify(this.initialSpace)===JSON.stringify(this.space)}render(){return s(a,null,s("ta-card",null,s("ta-form-label",null,"Space"),s("form",null,s("ta-input",{type:"email",label:"Email",value:this.space.email,onTaInput:t=>this.handleUpdateSpace("email",t.detail)}),s("ta-button",{disabled:this.hasNotUpdatedSpace,loading:this.updatingSpace,onTaClick:this.onSubmit},"Update"))))}});k.style=x;const U=".ta-tab-body-component{display:none}.ta-tab-body-component.active{display:block}";const A=t("ta_tab_body",class{constructor(t){e(this,t);this.isActive=false}async activate(){this.isActive=true}async deactivate(){this.isActive=false}render(){return s("div",{class:{"ta-tab-body-component":true,active:this.isActive}},s("slot",null))}});A.style=U;const D=".ta-tab-header-component{position:relative;background-color:transparent;font-size:14px;cursor:pointer;color:var(--primary-text-color);border-width:0px;border-style:initial;border-color:initial;-o-border-image:initial;border-image:initial;padding-bottom:12px;outline:none;bottom:-2px;margin-right:22px;font-weight:500}.ta-tab-header-component.active{border-bottom:2px solid var(--primary-color)}.ta-tab-header-component:hover:not(:disabled):not(.active){border-bottom:2px solid var(--light-border-color)}";const $=t("ta_tab_header",class{constructor(t){e(this,t);this.isActive=false}async activate(){this.isActive=true}async deactivate(){this.isActive=false}render(){return s("div",{class:{"ta-tab-header-component":true,active:this.isActive}},s("slot",null))}});$.style=D;const _=".ta-tab-header-bar-component{display:-ms-flexbox;display:flex;margin-bottom:24px;border-bottom:2px solid rgb(221, 221, 221);border-radius:2px;padding:0px}";const I=t("ta_tab_header_bar",class{constructor(t){e(this,t)}render(){return s("div",{class:"ta-tab-header-bar-component"},s("slot",null))}});I.style=_;const T="ta-tabs{}";const B=t("ta_tabs",class{constructor(t){e(this,t);this.headers=[];this.bodies=[];this.initialValue="";this.bindHeaderClickHandlers=t=>{t.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();this.activateHeader(t.tab);this.activateBody(t.tab);this.taChange.emit(t.tab)})})};this.taChange=r(this,"taChange",7)}componentDidLoad(){this.getHeaders();this.getBodies()}getHeaders(){const t=this.$el.querySelectorAll("ta-tab-header");this.headers=Array.from(t);if(this.headers.length===0){throw new Error("[ta-tabs] Must have at least one ta-tab-header")}if(this.initialValue===""){this.headers[0].activate()}else{this.activateHeader(this.initialValue)}this.bindHeaderClickHandlers(this.headers)}activateHeader(t){const e=this.headers.find(e=>e.tab===t);this.deactivateHeaders();e.activate()}deactivateHeaders(){this.headers.forEach(t=>t.deactivate())}getBodies(){const t=this.$el.querySelectorAll("ta-tab-body");this.bodies=Array.from(t);if(this.bodies.length===0){throw new Error("[ta-tabs] Must have at least one ta-tab-header")}if(this.initialValue===""){this.bodies[0].activate()}else{this.activateBody(this.initialValue)}}activateBody(t){const e=this.bodies.find(e=>e.tab===t);this.deactivateBodies();e.activate()}deactivateBodies(){this.bodies.forEach(t=>t.deactivate())}render(){return s("div",{class:"ta-tabs-component"},s("slot",null))}get $el(){return i(this)}});B.style=T}}}));