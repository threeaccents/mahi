System.register(["./p-05ba43f8.system.js","./p-aec35cab.system.js","./p-f2ebe6a2.system.js","./p-16d83290.system.js","./p-4919965f.system.js"],(function(e){"use strict";var t,s,a,i,r,l,n,o;return{setters:[function(e){t=e.r;s=e.d;a=e.h;i=e.H},function(e){r=e.i;l=e.a},function(){},function(e){n=e.t},function(e){o=e.U}],execute:function(){const h={firstName:"",lastName:"",email:"",password:"",isAdmin:false};const c=":host{display:block}.form-title{font-size:24px;font-weight:bold;font-stretch:normal;font-style:normal;line-height:normal;letter-spacing:-0.09px;color:var(--primary-text-color)}label{font-size:14px;font-weight:bold;font-stretch:normal;font-style:normal;line-height:normal;letter-spacing:-0.05px;color:var(--dark-text-color);margin-bottom:24px;display:block}.header{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end}.close-icon{font-size:24px;font-weight:normal;font-stretch:normal;font-style:normal;line-height:normal;letter-spacing:-0.09px;text-align:center;color:var(--light-text-color);cursor:pointer}ta-icon{--ta-icon-fill:#c3cbd3}";const m={fullName:"",password:"",email:"",error:""};const d=e("create_user_view",class{constructor(e){t(this,e);this.newUser=h;this.formErr=m;this.creatingUser=false;this.fullName="";this.onSubmit=e=>{e.preventDefault();this.validate().then(this.createUser).catch(this.handleValidationErrors)};this.handleValidationErrors=e=>{this.formErr=e};this.createUser=()=>{this.creatingUser=true;const e=this.getPayload();o().createUser(e).then(this.onSuccess).catch(this.handleError).finally(()=>this.creatingUser=false)};this.getLastName=()=>{const e=this.fullName.split(" ");e.shift();return e.join(" ")};this.getPayload=()=>Object.assign(Object.assign({},this.newUser),{firstName:this.fullName.split(" ")[0],lastName:this.getLastName()});this.onSuccess=e=>{n().success(`${e.data.firstName} ${e.data.lastName} was created!`);this.resetForm();this.taUserWasCreated.emit(e.data);this.history.push(`/users`)};this.handleError=e=>{if(!e.error){this.formErr.error="Oops! Something went wrong. Please refresh and try again";return console.log(e)}const t=e.error;if(t.includes("email is taken")){this.formErr=Object.assign(Object.assign({},this.formErr),{email:"Email is taken"});return}n().danger(t)};this.validate=()=>{const{newUser:e}=this;let t={};if(this.fullName===""){t=Object.assign(Object.assign({},t),{fullName:"Full name is required"})}if(!!this.fullName&&!r(this.fullName)){t=Object.assign(Object.assign({},t),{fullName:"Please enter a valid full name"})}if(e.email===""){t=Object.assign(Object.assign({},t),{email:"Email is required"})}if(!!e.email&&!l(e.email)){t=Object.assign(Object.assign({},t),{email:"Please enter a valid email address"})}if(e.password===""){t=Object.assign(Object.assign({},t),{password:"Password is required"})}if(!!e.password&&e.password.length<7){t=Object.assign(Object.assign({},t),{password:"Password must be at least 7 characters long"})}return Object.keys(t).length===0?Promise.resolve():Promise.reject(t)};this.updateNewUser=(e,t)=>{this.formErr=m;this.newUser=Object.assign(Object.assign({},this.newUser),{[e]:t})};this.updateFullName=e=>{this.formErr=m;this.fullName=e};this.resetForm=()=>{this.newUser=h;this.formErr=m};this.handleClose=()=>{const e=this.history.location.pathname;this.resetForm();this.history.push(e)};this.taUserWasCreated=s(this,"taUserWasCreated",7)}render(){const{newUser:e,formErr:t}=this;return a(i,null,a("div",{class:"header"},a("div",{class:"close-icon",onClick:this.handleClose},a("ta-icon",{icon:"close"}))),a("ta-form",{onTaSubmit:e=>this.onSubmit(e)},a("label",null,"Create User"),a("ta-input",{value:this.fullName,label:"Full Name",onTaInput:e=>this.updateFullName(e.detail),error:t.fullName}),a("ta-input",{value:e.email,label:"Email",onTaInput:e=>this.updateNewUser("email",e.detail),error:t.email}),a("ta-input",{type:"password",value:e.password,label:"Password",onTaInput:e=>this.updateNewUser("password",e.detail),error:t.password}),a("ta-switch-button",{initialChecked:e.isAdmin,label:"Administrator",onTaChange:e=>this.updateNewUser("isAdmin",e.detail)}),a("ta-error",{error:t.error}),a("ta-button",{type:"submit",loading:this.creatingUser,onTaClick:e=>this.onSubmit(e)},"Create User"),a("ta-button",{color:"white",onTaClick:this.handleClose},"Cancel")))}});d.style=c}}}));