import{r as t,h as a,H as i}from"./p-cd2828d1.js";import"./p-4c11f27f.js";import{A as p}from"./p-c60f5320.js";import{t as s}from"./p-df5b8a0d.js";const o=class{constructor(a){t(this,a),this.applications=[],this.fetchingApi=!1,this.applicationView=localStorage.getItem("applicationViewType")||"card",this.loadApplications=()=>{this.fetchingApi=!0,p().list().then(this.handleSuccess).catch(this.handleError).finally(()=>this.fetchingApi=!1)},this.handleSuccess=t=>{this.applications=t.data},this.handleError=t=>{if(!t.error)return s().danger("Oops! Something went wrong. Please refresh and try again"),console.log(t);s().danger(t.error)},this.updateApplicationView=t=>{this.applicationView=t,localStorage.setItem("applicationViewType",t)}}listenApplicationWasUpdated(t){this.applications=this.applications.map(a=>a.id!==t.detail.id?a:t.detail)}listenApplicationWasDeleted(t){this.applications=this.applications.filter(a=>a.id!==t.detail)}componentWillLoad(){this.loadApplications()}render(){const t=this.history.location.pathname;return a(i,null,a("ta-app-page",null,a("ta-page-header",{pageTitle:"My Applications"},a("div",{slot:"right"},a("div",{class:"page-actions"},a("ta-icon",{onClick:()=>this.updateApplicationView("card"),class:{selected:"card"===this.applicationView},icon:"card"}),a("ta-icon",{icon:"list",onClick:()=>this.updateApplicationView("list"),class:{selected:"list"===this.applicationView}})))),this.fetchingApi?a("ta-loader",null):a("div",{class:{"applications-wrapper":!0,"full-width":"list"===this.applicationView}},a("stencil-route-link",{url:`${t}#createApplication`},a("card"===this.applicationView?"ta-application-card":"ta-application-list-card",{create:!0})),this.applications.map(t=>a("card"===this.applicationView?"ta-application-card":"ta-application-list-card",{application:t})))))}};o.style=":host{display:block}.applications-wrapper{display:grid;grid-template-columns:auto auto auto auto;grid-gap:20px}.applications-wrapper.full-width{grid-template-columns:auto}a{text-decoration:none;color:inherit}.page-actions{display:-ms-flexbox;display:flex}ta-icon{opacity:.5;cursor:pointer}ta-icon.selected{opacity:1}ta-icon:nth-child(2){margin-left:17px}@media (max-width: 1400px){.applications-wrapper{grid-template-columns:auto auto auto}}@media (max-width: 1140px){.applications-wrapper{grid-template-columns:auto auto}}@media (max-width: 1080px){.applications-wrapper{grid-template-columns:auto auto auto}}@media (max-width: 866px){.applications-wrapper{grid-template-columns:auto auto}}@media (max-width: 600px){.applications-wrapper{grid-template-columns:auto}}";export{o as applications_view}